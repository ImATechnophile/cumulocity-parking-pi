/* administration_storageLimitEmail 8.21.0 2018-01-30T22:07:40+00:00 ab57d6f7e859+ (release/8.21.0) r8.21.0 */
!function(){"use strict";function t(t,a,e){t.addNavigation({parent:e("Management"),name:e("Storage quota"),path:"storageQuotaEmail",icon:"hdd-o",priority:500,showIf:["c8yStorageLimitation",function(t){return t.hasStorageLimitationEnabled()}]}),a.when("/storageQuotaEmail",{templateUrl:"administration_storageLimitEmail/views/storageLimitForm.html"})}angular.module("c8y.parts.storageLimitEmail",[]).config(["c8yNavigatorProvider","c8yViewsProvider","gettext",t])}(),function(){"use strict";function t(t,a,e,i,n,r,o,l){function s(){d(),m(),u()}function d(){t.userGroups=[],n.list().then(function(a){_.forEach(a,function(a){t.userGroups.push(a.name)})})}function m(){e.changeTitle({title:l("Storage quota")})}function u(){i.getStorageLimitationEmailData().then(function(a){var e=a.data,i=!!e["threshold.level"]&&"0"!==e["threshold.level"];t.data={emailWarningEnabled:i,selectedUserGroup:e["group.name"],threshold:+e["threshold.level"]}},function(){t.data={emailWarningEnabled:!1}})}function c(){var a,e=0;t.data.emailWarningEnabled&&(a=t.data.selectedUserGroup,e=t.data.threshold),i.saveStorageLimitationEmailData({"group.name":a,"threshold.level":e}).then(function(){t.data.selectedUserGroup=a,t.data.threshold=0===e?void 0:e,o.success(l("Notification email settings successfully updated!"))})}t.updateStorageLimitEmailInfo=c,t.invalid=_.partial(r.invalid,t,"storageLimitForm"),t.validationHints=r.validationHints,t.errorList={required:l("This field is required!"),max:l("The threshold cannot be bigger than 100%."),min:l("The threshold cannot be smaller than 1%.")},s()}angular.module("c8y.parts.storageLimitEmail").controller("storageLimitCtrl",["$scope","$http","c8yTitle","c8yStorageLimitation","c8yUserGroup","c8yBase","c8yAlert","gettext",t])}(),function(){"use strict";function t(t){var a;a='<div class="row" ng-controller="storageLimitCtrl">\n  <div class="col-xs-12 col-sm-8 col-md-6 col-lg-4">\n    <p style="font-weight: 300" translate>\n      Send a warning e-mail to a user group when the storage quota is nearly reached.\n    </p>\n    <form name="storageLimitForm" ng-submit="updateStorageLimitEmailInfo()">\n      <div class="checkbox">\n        <label><input type="checkbox" ng-model="data.emailWarningEnabled" name="emailWarningEnabled">\n        <span translate>Activate notification</span></label>\n      </div>\n      <div class="form-group" ng-if="data.emailWarningEnabled">\n        <label for="selectedUserGroup" translate>Notified user group</label>\n        <select name="type" class="form-control" ng-model="data.selectedUserGroup" name="selectedUserGroup" ng-options="group for group in userGroups" required>\n        </select>\n      </div>\n      <div class="form-group" ng-class="{\'has-error\': invalid(\'threshold\')}" ng-if="data.emailWarningEnabled">\n        <label for="threshold" translate>Threshold (%)</label>\n        <input uib-tooltip="{{validationHints(storageLimitForm.threshold, errorList)}}" min="1" max="100" type="number" class="form-control input-border" ng-model="data.threshold" name="threshold" required>\n      </div>\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary" ng-disabled="storageLimitForm.$invalid" translate>Update settings</button>\n      </div>\n    </form>\n  </div>\n</div>\n',t.put("administration_storageLimitEmail/views/storageLimitForm.html",a),t.put("/apps/administration/storageLimitEmail/views/storageLimitForm.html",a)}angular.module("c8y.parts.storageLimitEmail").run(["$templateCache",t])}();