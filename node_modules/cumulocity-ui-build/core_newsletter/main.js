/* core_newsletter 8.21.0 2018-01-30T22:09:00+00:00 ab57d6f7e859+ (release/8.21.0) r8.21.0 */
!function(){"use strict";angular.module("c8y.newsletter",[])}(),function(){"use strict";function e(e,t){e.addComponentGroup({name:"newsletter",label:t("Newsletter"),priority:1e3}),e.addComponent({priority:1e3,template:'<c8y-subscribe-newsletter user="user" form="forms.userForm" />',ngStyle:{float:"left",marginRight:"1.6em"}},"newsletter")}e.$inject=["c8yUserSettingsBlocksProvider","gettext"],angular.module("c8y.newsletter").config(e)}(),function(){"use strict";function e(e){function t(){n.form.email&&(n.user&&n.user.newsletter&&!n.user.email?(n.form.email.$setDirty(!0),n.form.email.$setValidity("required",!1)):n.form.email.$setValidity("required",!0))}var n=this;_.assign(n,{description:e("Send me information about outages, maintenance or updates."),$doCheck:t})}e.$inject=["gettext"],angular.module("c8y.newsletter").component("c8ySubscribeNewsletter",{controller:e,controllerAs:"vm",bindings:{user:"=",form:"="},template:'<div class="checkbox"><label><input type="checkbox" ng-model="vm.user.newsletter" />{{vm.description | translate}}</label></div>'})}(),function(){"use strict";function e(e,t,n,r,o){function i(){return n.current().then(function(e){return o.downloadAndSaveAs({},r.url("user/"+e.tenant+"/users/newsletterEmails"))})}return{download:i}}e.$inject=["$http","$q","c8yUser","c8yBase","c8yBinaryCommon"],angular.module("c8y.newsletter").factory("NewsletterService",e)}(),function(){"use strict";function e(e,t){function n(){return o.loading?"spinner":"download"}function r(){o.loading||(o.loading=!0,e.download().finally(function(){o.loading=!1}))}var o=this;_.assign(o,{emailAddresses:t("E-mail addresses"),tooltip:t("Download list of e-mails for users subscribed for newsletter on current tenant and its subtenants."),loading:!1,download:r,getIcon:n})}e.$inject=["NewsletterService","gettext"],angular.module("c8y.newsletter").component("c8yDownloadEmailsList",{controller:e,controllerAs:"vm",template:'<a href="" class="btn btn-link pull-right" ng-click="vm.download()" uib-tooltip="{{vm.tooltip | translate}}"><i c8y-icon="{{vm.getIcon()}}"></i> {{vm.emailAddresses | translate}}</a>'})}(),function(){"use strict";function e(e){}angular.module("c8y.newsletter").run(["$templateCache",e])}();