/* core_dashboardUI 8.21.0 2018-01-30T22:08:22+00:00 ab57d6f7e859+ (release/8.21.0) r8.21.0 */
!function(){"use strict";function t(t){t.initUI()}t.$inject=["c8yDashboardUiProvider"],angular.module("c8y.parts.dashboardUI",[]).config(t)}(),function(){"use strict";function t(t,a,o){function e(){d(),n()}function n(){_.forEach(b,i)}function i(t){a.when(t,y)}function d(){l.forEach(t.addUrlAction)}function r(t,a){function o(o,e){a[n](o,e).then(function(){a.clearCacheList(),t.reload()})}var e=a.getContext(),n=e.context+"Add",i=e.id,d={singleUseDashboards:!0};a.addDashboard(d,e).then(function(t){t&&(t.deviceType&&(i=t.deviceTypeValue,n="deviceTypeAdd"),o(i,t))})}function c(t,a){var o=_.get(a.getContext(),"id");return t.canAdminMOs([o])}function s(t,a,o,e){function n(t){a.addTab({name:t.name,icon:t.icon,priority:_.isUndefined(t.priority)?1e4:t.priority,path:u+"/dashboard/"+t.id})}function i(t){t.forEach(n)}var d=t.getContext(),r=d.context,s=d.id,u=t.getContextPath();"device"===r?t.getContextObject().then(t.deviceTypeList).then(i):"group"===r&&t.groupList(s).then(i);var f=t.dashboardToPaste();f&&e.addAction({text:o.getString('Paste dashboard "{{name}}"',f),icon:"clipboard",showIf:c,action:h})}function h(t,a,o,e){function n(t){var o=e.getContext(),n=e.getContextPath(o),i=n;t.id&&(i+="/dashboard/"+t.id),a.path(i)}return o.pasteDashboard().then(n).then(t.reload)}function u(t,a,o){function e(t){var e=o.getContext(),n=o.getContextPath(e),i=n;t.id&&(i+="/dashboard/"+t.id),a.path(i)}return{redirectToDashboard:e}}r.$inject=["$route","dashboardSvc"],c.$inject=["c8yPermissions","dashboardSvc"],s.$inject=["dashboardSvc","c8yTabs","gettextCatalog","c8yActions"],h.$inject=["$route","$location","dashboardSvc","c8yUiUtil"],u.$inject=["$injector","$location","c8yUiUtil"];var f=["/device/:deviceId","/group/:groupId"],b=_.map(f,function(t){return t+"/dashboard/:dashboardId"}),g="/(device|group)/\\d+/\\w+",p={text:o("New dashboard"),priority:2500,action:r,showIf:c,path:g},v={autoRun:!0,action:s,path:g},l=[p,v],y={template:'<c8y-dashboard-gridstack id="::vm.dashboardId"></c8y-dashboard-gridstack>',controllerAs:"vm",controller:["$routeParams",function(t){this.dashboardId=t.dashboardId}]};return{initUI:e,$get:u}}t.$inject=["c8yActionsProvider","c8yViewsProvider","gettext"],angular.module("c8y.parts.dashboardUI").provider("c8yDashboardUi",t)}(),function(){"use strict";function t(t){}angular.module("c8y.parts.dashboardUI").run(["$templateCache",t])}();