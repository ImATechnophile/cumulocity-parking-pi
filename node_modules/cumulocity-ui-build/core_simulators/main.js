/* core_simulators 8.21.0 2018-01-30T22:09:31+00:00 ab57d6f7e859+ (release/8.21.0) r8.21.0 */
!function(){"use strict";function t(t){t.configBlock()}t.$inject=["c8ySimulatorsUiProvider"],angular.module("c8y.simulators",[]).config(t)}(),function(){"use strict";function t(t,n,e,s,a,i,o,l,r,c){function u(){var t=i.url(j),n={silentError:!0};return e.get(t,n).then(i.getResData)}function m(t){return t=i.getId(t),i.url(j+"/"+t)}function d(t){var n=m(t);return e.get(n).then(i.getResData)}function p(t){var n=m(t);return e.delete(n)}function v(t){var n=m(t);return e.put(n,t).then(i.getResData)}function g(t){var n=i.url(j);return e.post(n,t).then(i.getResData)}function f(t){var n=_.cloneDeep(t);return delete n.id,n.state=q.PAUSED,g(n)}function y(t){try{return v(t)}catch(n){return g(t)}}function h(t){return v({id:t.id,state:q.RUNNING})}function b(t){return v({id:t.id,state:q.PAUSED})}function S(t){var n={title:s("Confirm delete?"),body:a.getString('Do you really want to remove simulator "{{name}}"?',t),size:"sm",labels:{ok:s("Delete"),cancel:s("Cancel")},status:"danger"},e=l(n),i=_.partial(p,t),o=_.partial(_.unary(r.success),s("Simulator removed."));return e.then(i).then(o)}function I(){return c.listAllPublishMessages().then(k).then(w)}function k(t){return _.reject(t,{hideInSimulators:!0})}function w(t){var n=c.Types,e=[n.ARRAY.name,n.OBJECTARRAY.name];return _.reject(t,function(t){return _.some(t.values||[],function(t){return _.includes(e,t.type)})})}function C(t,n){if(t.messageId)return _.find(n,function(n){return String(n.msgId)===String(t.messageId)&&("builtin"===t.type||String(n._template.__externalId)===String(t.templateId))})}function A(){return t.when(V)}function $(){return{instances:1,state:q.PAUSED,name:s("Empty simulator"),commandQueue:[{type:"sleep",seconds:5}],supportedOperations:{}}}function x(){var t=[2.0791169082,9.1354545764,8.0901699437,6.6913060636,5,3.0901699437,1.0452846327,-1.0452846327,-3.0901699437,-5,-6.6913060636,-8.0901699437,-9.1354545764,-9.7814760073,-10,-9.7814760073,-9.1354545764,-8.0901699437,-6.6913060636,-5,-3.0901699437,-1.0452846327,1.0452846327,3.0901699437,5,6.6913060636,8.0901699437,9.1354545764,9.7814760073,10];return{instances:1,state:q.PAUSED,name:s("Temperature"),commandQueue:_.reduce(t,function(t,n){return t.push({type:"builtin",messageId:200,values:["c8y_Temperature","T",n,"ÂºC"]}),t.push({type:"sleep",seconds:5}),t},[]),supportedOperations:{}}}function D(){var t=[[6.758050918579102,51.225324115117],[6.75933837890625,51.22446407082351],[6.760711669921875,51.22338899285697],[6.762084960937499,51.222152622151995],[6.763544082641601,51.2212387615908],[6.765260696411133,51.21994857461735],[6.766977310180663,51.21828202959081],[6.769466400146484,51.21731433059918],[6.771183013916016,51.21849707104884],[6.772127151489258,51.219034670299344],[6.773672103881836,51.219088429879115],[6.778392791748047,51.2189809106568],[6.782083511352538,51.2189809106568],[6.782169342041016,51.22156130268409],[6.782941818237305,51.224356564156835],[6.783199310302734,51.22559287566293],[6.781654357910156,51.22709790571764],[6.780967712402344,51.23096775701038],[6.778907775878906,51.23403115849572],[6.777019500732422,51.23639574998666],[6.77478790283203,51.23961999708345],[6.774101257324219,51.24117830217582],[6.7730712890625,51.24300521333463],[6.771526336669922,51.24391864170407],[6.769380569458007,51.24542307241623],[6.767406463623046,51.247303541606165],[6.765689849853516,51.249130209480654],[6.762685775756836,51.24896903582209],[6.760110855102538,51.247464721101935],[6.7559051513671875,51.245154427683886],[6.753416061401367,51.24364998818434],[6.7517852783203125,51.242790286376156],[6.750326156616211,51.24198430133743],[6.74835205078125,51.24133950313797],[6.746463775634765,51.24080216440054],[6.741571426391602,51.24085589855674],[6.738824844360352,51.24085589855674],[6.73762321472168,51.24021108453954],[6.736078262329102,51.23897516574192],[6.734533309936523,51.23687940145701],[6.733760833740234,51.2353209507378],[6.7339324951171875,51.23467605913632],[6.733589172363281,51.23397741636766],[6.73384666442871,51.232741330096836],[6.735048294067383,51.231720190305005],[6.738395690917969,51.230645281832004],[6.7406272888183585,51.22989283096072],[6.742601394653319,51.22887162795567],[6.745090484619141,51.22811914808259],[6.749553680419922,51.22704415549173],[6.753501892089844,51.22645289886354],[6.756248474121093,51.22602288927206]];return{instances:1,state:q.PAUSED,name:s("Position"),commandQueue:_.reduce(t,function(t,n){return t.push({type:"builtin",messageId:402,values:[n[1],n[0],0,10]}),t.push({type:"sleep",seconds:5}),t},[]),supportedOperations:{}}}function O(t){t&&(_.isArray(t)?_.forEach(t,function(t){L.push(t)}):L.push(t))}function T(t,n){var e;return e=P(t,n)?E(t,n):U(t,n)}function U(t,n){var e=_.isString(n)?n:n.fragment;return t.c8y_SupportedOperations=_.union(t.c8y_SupportedOperations||[],[e]),y(_.pick(t,["id","c8y_SupportedOperations"]))}function E(t,n){var e=_.isString(n)?n:n.fragment;return t.c8y_SupportedOperations=_.without(t.c8y_SupportedOperations||[],e),y(_.pick(t,["id","c8y_SupportedOperations"]))}function P(t,n){var e=(t||{}).c8y_SupportedOperations||[],s=_.isString(n)?n:n.fragment;return e.indexOf(s)>-1}function N(t,n){return t.c8y_CustomOperations=_.concat(t.c8y_CustomOperations||[],[n]),y(_.pick(t,["id","c8y_CustomOperations"]))}function R(t,n){return t.c8y_CustomOperations=_.without(t.c8y_CustomOperations||[],n),y(_.pick(t,["id","c8y_CustomOperations"]))}function F(t,n){var e;if("sleep"===t.type)e=s("Sleep");else if("message"===t.type||"builtin"===t.type)if(t.messageId){var a=C(t,n);e=a&&a.name?a.name:s("Message")}else e=s("New message");return e}function M(){var t=i.url(j),n={silentError:!0},s=function(t){return t.status<500};return e.head(t,n).then(_.constant(!0),s)}var j="service/device-simulator/simulators",q={RUNNING:"RUNNING",PAUSED:"PAUSED"},V=[{fragment:"c8y_Configuration",name:s("Configuration")},{fragment:"c8y_Software",name:s("Software update")},{fragment:"c8y_Restart",name:s("Device restart")},{fragment:"c8y_Firmware",name:s("Firmware update")}],L=[{name:s("Empty simulator"),data:$()},{name:s("Temperature measurements"),data:x()},{name:s("Position update event"),data:D()}];return{removeAfterConfirmation:S,PRESETS:L,STATES:q,operations:A,list:u,detail:d,remove:p,save:y,create:g,update:v,run:h,pause:b,clone:f,listAllPublishMessages:I,findMessageForInstruction:C,Types:c.Types,addPreset:O,toggleOperation:T,addOperation:U,removeOperation:E,supportsOperation:P,addCustomOperation:N,removeCustomOperation:R,instructionTitle:F,isAvailable:M}}t.$inject=["$q","$location","$http","gettext","gettextCatalog","c8yBase","c8yTitle","c8yModal","c8yAlert","c8ySmartRestTemplates"],angular.module("c8y.simulators").factory("c8ySimulators",t)}(),function(){"use strict";function t(t,n,e,s){function a(t){this.id=t.simulatorId}function i(){l(),o(),r()}function o(){n.addNavigation({name:t("Simulators"),parent:t("Devices"),path:y,icon:u,showIf:["c8ySimulators",function(t){return t.isAvailable()}]})}function l(){e.when("/"+y,b);var t=0;_.forEach([S,I,k],function(n){_.assign(n,w,{priority:t--}),e.when("/"+h,n)})}function r(){s.addTitle("/"+h,C)}function c(t,n,e,s,a,i){function o(){i.changeTitle({title:s("Simulators")})}function l(t){n.path("/"+y+"/"+t.id)}function r(){n.path("/"+y)}function c(t){return e.open({size:"sm",component:"c8ySimulatorCloneDialog",resolve:{simulator:function(){var n=_.cloneDeep(t);return n.name=a.getString("Clone of {{name}}",n),n}}}).result}function f(){return e.open({size:"sm",component:"c8yOperationAddDialog"}).result}function h(t){return e.open({templateUrl:"core_simulators/add/simulatorAddorEdit.modal.html",controller:["simulator","$uibModalInstance",function(t,n){function e(){n.close(s.newSimulator.instances)}var s=this;s.editInstances=!0,s.newSimulator=t,s.ok=e,s.cancel=n.dismiss}],resolve:{simulator:_.constant(_.clone(t))},controllerAs:"vm"}).result}return{setListTitle:o,listing:r,edit:l,cloneDialog:c,addCustomOperationDialog:f,editSimulatorInstances:h,icons:{simulator:u,instruction:m,message:d,builtin:d,sleep:p,loop:v,operations:g}}}a.$inject=["$routeParams"],c.$inject=["$q","$location","$uibModal","gettext","gettextCatalog","c8yTitle"];var u="c8y-simulator",m="sort-amount-asc",d="arrow-right",p="clock-o",v="refresh",g="gamepad",f="exclamation-triangle",y="simulators",h=y+"/:deviceId",b={template:"<c8y-simulators-list></c8y-simulators-list>"},S={template:'<c8y-simulator-detail simulator-id="vm.id"></c8y-simulator-detail>',name:t("Instructions"),icon:m},I={template:'<c8y-simulator-operations simulator-id="vm.id"></c8y-simulator-operations>',name:t("Supported operations"),icon:g},k={name:t("Alarms"),priority:800,icon:f,templateUrl:"devicemanagement_alarmList/views/index.html"},w={controllerAs:"vm",controller:a},C={data:["$q",function(t){return t.when({templateUrl:"core_simulators/detail/title.html"})}]};return{$get:c,configBlock:i,hookTitle:r,hookViews:l,hookNavigation:o}}t.$inject=["gettext","c8yNavigatorProvider","c8yViewsProvider","c8yTitleProvider"],angular.module("c8y.simulators").provider("c8ySimulatorsUi",t)}(),function(){"use strict";function t(t,n,e,s,a,i){function o(){s.setListTitle(),l()}function l(){g.loading=!0,e.list().then(m,r).finally(function(){delete g.loading})}function r(n){403===n.status?a.info(t("You need this role to access simulators: Simulator Admin")):a.danger(i.getTranslatedServerMessage(n.data.message),n.data)}function c(t){e.removeAfterConfirmation(t).then(l)}function u(t){return s.cloneDialog(t).then(e.clone).then(l)}function m(t){g.simulators=t}function d(t){e.save(t).then(l)}function p(t){Object.defineProperty(t,"_changing",{writable:!0,value:!0})}function v(t){return function(n){p(n),e[t](n).then(function(t){_.assign(n,t)}).finally(function(){n._changing=void 0})}}var g=this;_.assign(g,{$onInit:o,onSimulatorAdded:d,icons:s.icons,edit:s.edit,remove:c,pause:v("pause"),run:v("run"),clone:u,load:l})}t.$inject=["gettext","gettextCatalog","c8ySimulators","c8ySimulatorsUi","c8yAlert","c8yLocales"],angular.module("c8y.simulators").component("c8ySimulatorsList",{templateUrl:"core_simulators/list/list.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";function t(t){function n(){e.icons=t.icons,e.simulator=_.cloneDeep(e.resolve.simulator)}var e=this;_.assign(e,{$onInit:n})}t.$inject=["c8ySimulatorsUi"],angular.module("c8y.simulators").component("c8ySimulatorCloneDialog",{templateUrl:"core_simulators/list/simulatorCloneDialog.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:t,controllerAs:"vm"})}(),function(){"use strict";function t(t){function e(){return s()}function s(){return t({templateUrl:"core_simulators/add/simulatorAddorEdit.modal.html",controller:n,size:"sm",controllerAs:"vm"}).then(a)}function a(t){t&&i.onAdded({simulator:t})}var i=this;i.add=e}function n(t,n,e,s,a){function i(){t.close(l.newSimulator)}function o(){var t=l.newSimulator=_.cloneDeep(l.preset.data);t.name=e.getString(t.name)}var l=this;_.assign(l,{ok:i,cancel:t.dismiss,icons:s.icons,presets:a.PRESETS,preset:_.first(a.PRESETS),onPresetSelected:o,$onInit:o})}t.$inject=["c8yModal"],n.$inject=["$uibModalInstance","gettext","gettextCatalog","c8ySimulatorsUi","c8ySimulators"],angular.module("c8y.simulators").component("c8ySimulatorAdd",{bindings:{onAdded:"&"},templateUrl:"core_simulators/add/simulatorAdd.button.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.simulators").component("c8ySimulatorDetail",{templateUrl:"core_simulators/detail/detail.html",bindings:{simulatorId:"<"},controller:"SimulatorDetailController",controllerAs:"vm"})}(),function(){"use strict";function t(t,n,e){function s(){l()}function a(t){var n=b.selectedInstruction;n&&"message"===n.type&&!n.messageId&&u(n),b.selectedInstruction=t}function i(){return e.editSimulatorInstances(b.simulator).then(o)}function o(t){b.simulator.instances=t,d(_.pick(b.simulator,["id","instances"]),!0)}function l(){var e=b.simulatorId||t.deviceId;n.detail(e).then(r)}function r(t){b.simulator=t}function c(t){return t===b.selectedInstruction}function u(t){b.selectedInstruction===t&&(b.selectedInstruction=void 0),_.remove(b.simulator.commandQueue,t),m()}function m(){return d(_.pick(b.simulator,["id","commandQueue"]),!0)}function d(t,s){return a(),n.save(t||b.simulator).then(s?_.identity:e.listing)}function p(){n.operations().then(function(t){b.operations=t})}function v(t){return n.supportsOperation(b.simulator,t)}function g(t){return n.toggleOperation(b.simulator,t)}function f(){return e.addCustomOperationDialog().then(function(t){return n.addCustomOperation(b.simulator,t).then(_.partial(g,t))})}function y(t){return n.removeOperation(b.simulator,t).then(_.partial(n.removeCustomOperation,b.simulator,t))}function h(t){return n.save({id:b.simulator.id,name:t})}var b=this;_.assign(b,{$onInit:s,selectInstruction:a,isInstructionSelected:c,remove:u,loadOperations:p,opActive:v,opToggle:g,changeSimulatorName:h,save:d,addCustomOperation:f,removeCustomOperation:y,editSimulatorInstances:i,saveCurrentSimulatorCommands:m})}t.$inject=["$routeParams","c8ySimulators","c8ySimulatorsUi"],angular.module("c8y.simulators").controller("SimulatorDetailController",t)}(),function(){"use strict";function t(t,n,e){function s(t){return u.isInstructionSelected(t)?{"pointer-events":"none"}:{}}function a(){var t=u.simulatorCtrl;_.assign(u,{select:t.selectInstruction,remove:t.remove,isInstructionSelected:t.isInstructionSelected}),l()}function i(t){u.select(t),u.instructions.push(t)}function o(t){return n.instructionTitle(t,c)}function l(){n.listAllPublishMessages().then(function(t){c=t})}function r(t){var n=angular.fromJson(angular.toJson(t));return!_.isEqual(_.keys(n),["type"])}var c,u=this,m={handle:".handle",update:function(){u.simulatorCtrl.saveCurrentSimulatorCommands()},helper:function(t,n){var e=n.clone();return e.css({transition:"none"}),e.find(".handle").css({visibility:"visible"}),e}};_.assign(u,{$onInit:a,uiSortableOptions:m,add:i,title:o,icons:e.icons,canDrag:r,checkClickable:s})}t.$inject=["gettext","c8ySimulators","c8ySimulatorsUi"],angular.module("c8y.simulators").component("c8ySimulatorInstructionList",{templateUrl:"core_simulators/detail/instructionList.html",require:{simulatorCtrl:"^c8ySimulatorDetail"},bindings:{instructions:"<"},controllerAs:"vm",controller:t})}(),function(){"use strict";function t(t,n,e,s,a){function i(){_.assign(h,{icons:a.icons})}function o(){var t=h.editInstruction=_.clone(h.instruction);t&&(y(),h.values=t.values||[]),delete h.valuesForm}function l(t){var n=h.selectedMessage||{},e=m(n);_.forEach(e,function(n,e){n.inputValue=t?void 0:h.values[e],_.includes(b,n.type)&&!_.isUndefined(n.inputValue)&&(n.inputValue=Number(n.inputValue))})}function r(){e(function(){n.find(".optionsForm input").first().trigger("focus")})}function c(){var t=h.selectedMessage||{},n=m(t),e=h.valuesData=[],a=0,i=s.findMessageForInstruction(h.instruction,h.messages);_.forEach(t.mandatoryValues,function(t){t.mandatory=!0}),_.forEach(n,function(t){t.order=a++,u(t)&&e.push(t)});var o=t&&i===t;l(!o),r()}function u(t){return!t.value&&t.type!==s.Types.DATE.name}function m(t){var n=_.union(t.mandatoryValues,t.customValues,t.values);return _.reject(n,"value")}function d(t){var n=h.editInstruction;h.messages=t,h.selectedMessage=s.findMessageForInstruction(n,h.messages),"sleep"!==n.type&&c(),r()}function p(){h.simulatorCtrl.remove(h.instruction)}function v(){var t=h.instruction;"message"!==t.type&&"builtin"!==t.type||t.messageId?h.simulatorCtrl.selectInstruction():h.simulatorCtrl.remove(h.instruction)}function g(t){var n=t.$valid,e=h.instruction,s=h.selectedMessage,a=_.includes(["message","builtin"],e&&e.type);return(!e||a&&!s)&&(n=!1),n}function f(){var t=h.instruction,n=h.editInstruction;if("sleep"===t.type)t.seconds=n.seconds;else{var e=h.selectedMessage,s=m(e);t.type=e._template?"message":"builtin",t.values=_.map(s,function(t){return _([t.value,t.inputValue,""]).filter(_.negate(_.isUndefined)).first()}),t.messageId=e.msgId,t.templateId=e._template?e._template.__externalId:void 0}h.simulatorCtrl.saveCurrentSimulatorCommands()}function y(){var n=h.messages?t.when(h.messages):s.listAllPublishMessages();return n.then(d)}var h=this,b=_(s.Types.values()).filter("numeric").map("name").value();_.assign(h,{$onInit:i,$onChanges:o,onSelectedMessage:c,remove:p,canSave:g,save:f,cancel:v})}t.$inject=["$q","$element","$timeout","c8ySimulators","c8ySimulatorsUi"],angular.module("c8y.simulators").component("c8ySimulatorInstructionDetail",{templateUrl:"core_simulators/detail/instructionDetail.html",require:{simulatorCtrl:"^c8ySimulatorDetail"},bindings:{instruction:"<"},controllerAs:"vm",controller:t})}(),function(){"use strict";function t(t){function n(t){var n={type:t};"sleep"===t&&(n.seconds=5),e.onAdd({instruction:n})}var e=this;_.assign(e,{addType:n,icons:t.icons})}t.$inject=["c8ySimulatorsUi"],angular.module("c8y.simulators").component("c8yInstructionAdd",{templateUrl:"core_simulators/detail/instructionAdd.html",bindings:{onAdd:"&",noLoops:"@"},controller:t,controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.simulators").component("c8ySimulatorOperations",{templateUrl:"core_simulators/detail/operations.html",bindings:{simulatorId:"<"},controller:"SimulatorDetailController",controllerAs:"vm"})}(),function(){"use strict";function t(t){var n=this;n.icons=t.icons}t.$inject=["c8ySimulatorsUi"],angular.module("c8y.simulators").component("c8yOperationAddDialog",{templateUrl:"core_simulators/detail/operationAddDialog.html",bindings:{close:"&",dismiss:"&"},controller:t,controllerAs:"vm"})}(),function(){"use strict";function t(t){var n;n='<button class="btn btn-link" ng-click="vm.add()">\n  <i c8y-icon="plus-square"></i>\n  <translate>New simulator</translate>\n</button>\n',t.put("core_simulators/add/simulatorAdd.button.html",n),t.put("/apps/core/simulators/add/simulatorAdd.button.html",n),n='<div class="modal-header">\n  <h3>\n    <i class="c8y-icon c8y-icon-simulator c8y-icon-duocolor"></i>\n    <span translate ng-hide="vm.editInstances">Add simulator</span>\n    <span translate ng-show="vm.editInstances">Edit number of simulator instances</span>\n  </h3>\n</div>\n<div class="modal-body">\n\n  <form name="newSimulatorForm" role="form" novalidate>\n\n    <div class="form-group" ng-if="!vm.editInstances">\n      <label for="presets">\n        <span title="{{\'Choose initial instructions\' | translate}}" translate>Presets</span>\n      </label>\n      <select name="presets" class="form-control" ng-model="vm.preset" ng-options="p as (p.name | translate) for p in vm.presets" ng-change="vm.onPresetSelected()"></select>\n      <c8y-error-feedback field="newSimulatorForm.presets"></c8y-error-feedback>\n    </div>\n\n    <div class="form-group" ng-if="!vm.editInstances">\n      <label for="name">\n        <span title="{{\'Descriptive simulator name\' | translate}}" translate>Simulator name</span>\n      </label>\n      <input id="name" name="name" type="text" class="form-control" ng-model="vm.newSimulator.name" ng-maxlength="500" required>\n      <c8y-error-feedback field="newSimulatorForm.name"></c8y-error-feedback>\n    </div>\n\n    <div class="form-group">\n      <label for="numberInstances">\n        <span title="{{\'Number of instances of the simulator to create\' | translate}}" translate>Number of instances</span>\n      </label>\n      <div class="row">\n        <div class="col-xs-10">\n          <input type="range" step="1" min="1" max="10" ng-model="vm.newSimulator.instances">\n        </div>\n        <div class="col-xs-2">\n          <span class="text" ng-bind="vm.newSimulator.instances"></span>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-primary" ng-click="vm.ok()" ng-disabled="newSimulatorForm.$pending || newSimulatorForm.$invalid" translate>\n    Create\n  </button>\n  <button class="btn btn-default" ng-click="vm.cancel()" translate>\n    Cancel\n  </button>\n</div>\n',t.put("core_simulators/add/simulatorAddorEdit.modal.html",n),t.put("/apps/core/simulators/add/simulatorAddorEdit.modal.html",n),n='<div class="row split-scroll">\n  <div class="col-md-6 scroll-column has-footer">\n    <c8y-simulator-instruction-list instructions="vm.simulator.commandQueue"></c8y-simulator-instruction-list>\n  </div>\n\n  <div class="col-md-6 scroll-column slideOutRight fast" style="animation-fill-mode: forwards" ng-class="{\'slideInRight animated\': vm.selectedInstruction, \'slideOutRight animated\': !vm.selectedInstruction && vm.simulator.commandQueue.length >= 0}">\n    <div class="card" style="margin-bottom:0">\n      <div class="card-header separator visible-sm visible-xs" style="width:100%">\n        <button class="btn btn-clean" title="{{\'Back\'| translate}}" ng-click="vm.selectInstruction()">\n          <i c8y-icon="chevron-left"></i><span translate>Back</span>\n        </button>\n      </div>\n      <c8y-simulator-instruction-detail instruction="vm.selectedInstruction"></c8y-simulator-instruction-detail>\n    </div>\n  </div>\n</div>',t.put("core_simulators/detail/detail.html",n),t.put("/apps/core/simulators/detail/detail.html",n),n='\n<div class="tight-grid">\n    <div class="col-xs-6">\n      <button class="btn-add-block" ng-click="vm.addType(\'message\')">\n        <i c8y-icon="{{vm.icons.message}}"></i> {{\'Add instruction\' | translate}}\n      </button>\n    </div>\n    <div class="col-xs-6">\n      <button class="btn-add-block" ng-click="vm.addType(\'sleep\')">\n        <i c8y-icon="{{vm.icons.sleep}}"></i> {{\'Add sleep\' | translate}}\n      </button>\n    </div>\n</div>\n',t.put("core_simulators/detail/instructionAdd.html",n),t.put("/apps/core/simulators/detail/instructionAdd.html",n),n='<div class="inner-scroll">\n  <div ng-if="vm.editInstruction.type === \'message\' || vm.editInstruction.type === \'builtin\' " class="card-header separator bottom-m-sm">\n\n    <ui-select style="width:100%" ng-model="vm.selectedMessage" title="{{\'Choose a message\' | translate}}" on-select="vm.onSelectedMessage()">\n      <ui-select-match placeholder="{{\'Select a message from the SmartREST templates\' | translate}}">\n        <span ng-bind-html="$select.selected.name | translate"></span>\n        <span class="text-muted" ng-bind-html="$select.selected.msgId"></span>\n        <small style="font-family:monospace" ng-bind-html="$select.selected.api"></small>\n        <small style="font-family:monospace" ng-bind-html="$select.selected.method"></small>\n      </ui-select-match>\n      <ui-select-choices repeat="msg in vm.messages | filter: $select.search">\n          <span ng-bind-html="msg.name | translate | highlight: $select.search"></span>\n          <span class="text-muted" ng-bind-html="msg.msgId | highlight: $select.search"></span>\n        <br ng-show="msg._template">\n          <small ng-show="msg._template" style="font-family:monospace" ng-bind-html="msg.api | highlight: $select.search"></small>\n          <small ng-show="msg._template" style="font-family:monospace" ng-bind-html="msg.method | highlight: $select.search"></small>\n        <br>\n\n        <small ng-hide="msg._template"><b translate>Built-in</b></small>\n        <small ng-show="msg._template"><b translate>Template</b></small>\n        <small class="text-muted" ng-show="msg._template" ng-bind-html="msg._template.name | highlight: $select.search"></small>\n        <small class="text-muted" ng-show="msg._template" ng-bind-html="msg._template.__externalId | highlight: $select.search"></small>\n      </ui-select-choices>\n    </ui-select>\n  </div>\n\n\n  <form name="valuesForm" novalidate class="optionsForm card-block" ng-submit="valuesForm.$valid && vm.save()" ng-switch="vm.editInstruction.type">\n\n    <div ng-switch-when="sleep">\n\n        <div class="form-group">\n          <label translate>Duration in seconds</label>\n          <input name="seconds" class="form-control" type="number" step="1" min="5" max="3600" required ng-model="vm.editInstruction.seconds">\n          <c8y-error-feedback field="valuesForm.seconds">\n            <span ng-message="min" ng-bind="\'Duration must be larger than 5\' | translate"></span>\n            <span ng-message="max" ng-bind="\'Duration cannot be larger than 3600\' | translate"></span>\n            <span ng-message="number" ng-bind="\'Duration must be a number\' | translate"></span>\n          </c8y-error-feedback>\n        </div>\n\n    </div>\n\n    <div ng-switch-default>\n\n      <div class="form-group" ng-repeat="val in vm.valuesData">\n        <label ng-bind="(val.path || val.label) | translate | humanize2" style="z-index:0"></label>\n        <c8y-smart-rest-value-input name="\'field\' + val.order" value="val.inputValue" type="val.type" render-type="val.renderType" validation="val.validation" model-options="val.modelOptions" placeholder="\'Value\' | translate" data-required="val">\n        </c8y-smart-rest-value-input>\n        <c8y-error-feedback field="valuesForm[\'field\' + val.order]"></c8y-error-feedback>\n      </div>\n\n    </div>\n\n    <button style="display:none"></button>\n  </form>\n\n  <div class="card-footer separator text-center">\n    <button class="btn btn-default" ng-click="vm.cancel()" translate>\n      Cancel\n    </button>\n    <button class="btn btn-primary" ng-disabled="!vm.canSave(valuesForm)" ng-click="vm.save()" translate>\n    Save\n  </button>\n    <button class="btn btn-danger" ng-click="vm.remove()" translate>\n      Remove\n    </button>\n  </div>\n</div>\n',t.put("core_simulators/detail/instructionDetail.html",n),t.put("/apps/core/simulators/detail/instructionDetail.html",n),n='<ul class="c8y-nav-stacked inner-scroll" ui-sortable="vm.uiSortableOptions" ng-model="vm.instructions">\n\n  <li class="c8y-stacked-item removable" ng-repeat="instruction in vm.instructions" ng-click="vm.select(instruction)" ng-style="vm.checkClickable(instruction)" ng-class="{active: vm.isInstructionSelected(instruction)}">\n\n    <i c8y-icon="reorder" ng-show="vm.canDrag(instruction)" title="{{\'Drag to reorder\' | translate}}" class="text-muted showOnHover handle"></i>\n    <span class="text-truncate">\n      <i c8y-icon="{{vm.icons[instruction.type]}}" style="font-size:1.2em"></i>\n      <span ng-bind="vm.title(instruction) | translate"></span>\n\n    <span class="text-muted" ng-show="instruction.type === \'message\'">\n        {{instruction.templateId}} / {{instruction.messageId}}\n      </span>\n    <span class="text-muted" ng-show="instruction.type === \'builtin\'">\n        {{instruction.messageId}}\n      </span>\n    <span class="text-muted" ng-show="instruction.type === \'sleep\'">\n        <span translate>{{instruction.seconds}} seconds</span>\n    </span>\n    </span>\n\n    <button class="btn btn-clean showOnHover btn-remove" title="{{\'Remove\' | translate}}" ng-click="vm.remove(instruction)">\n      <i c8y-icon="minus-circle" class="text-danger"></i>\n    </button>\n  </li>\n\n  <li ng-show="vm.instructions.length === 0">\n    <div class="c8y-empty-state text-left ng-scope">\n      <h1 class="c8y-icon fa fa-arrow-right"></h1>\n      <p><strong translate>No instructions.</strong> <span translate>Click below to add the first one.</span><br>\n        <small c8y-guide-docs translate>Find out more on the <a c8y-guide-href="users-guide/device-management/#adding-instructions-to-the-simulator" target="_blank">User guide</a>.</small>\n      </p>\n    </div>\n  </li>\n</ul>\n<div class="scroll-column-footer">\n  <c8y-instruction-add on-add="vm.add(instruction)"></c8y-instruction-add>\n</div>',t.put("core_simulators/detail/instructionList.html",n),t.put("/apps/core/simulators/detail/instructionList.html",n),n='<div class="modal-header">\n  <h3>\n    <i c8y-icon="{{vm.icons.operations}}"></i>\n    <span translate>Add custom operation</span>\n  </h3>\n</div>\n\n<div class="modal-body">\n\n  <form name="newOpForm" role="form" novalidate>\n    <div class="form-group">\n      <label for="name">\n        <span translate>Custom operation type</span>\n        <i c8y-icon="question-circle-o" uib-tooltip="{{\'Insert the custom operation type to be supported by your simulator\' | translate}}" tooltip-placement="right" tooltip-append-to-body="true">\n        </i>\n      </label>\n      <input id="op" name="op" type="text" class="form-control" ng-model="vm.op" required>\n      <c8y-error-feedback field="newOpForm.op"></c8y-error-feedback>\n    </div>\n\n  </form>\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="vm.dismiss()" translate>\n  Cancel\n</button>\n  <button class="btn btn-primary" ng-click="vm.close({$value: vm.op})" ng-disabled="newOpForm.$invalid" translate>\n    Add\n  </button>\n</div>\n',t.put("core_simulators/detail/operationAddDialog.html",n),t.put("/apps/core/simulators/detail/operationAddDialog.html",n),n='<div class="row">\n  <div class="col-lg-6 col-md-12">\n    <ul class="nav c8y-nav-stacked list-container" ng-init="vm.loadOperations()">\n\n        <li class="c8y-stacked-item" style="padding-right:80px; cursor:default" ng-repeat="op in vm.operations">\n\n          <label class="c8y-switch" title="{{\'Toggle operation\' | translate}}" style="vertical-align:middle">\n            <input type="checkbox" ng-checked="vm.opActive(op)" ng-click="vm.opToggle(op)">\n            <span></span>\n            {{op.name | translate}}\n            <small class="text-muted">{{op.fragment}}</small>\n          </label>\n\n        </li>\n\n        <li style="height:25px" ng-show="vm.simulator.c8y_CustomOperations.length"></li>\n\n        <li class="c8y-stacked-item removable" ng-repeat="op in vm.simulator.c8y_CustomOperations">\n          <label class="c8y-switch" title="{{\'Toggle operation\' | translate}}" style="vertical-align:middle">\n            <input type="checkbox" ng-checked="vm.opActive(op)" ng-click="vm.opToggle(op)">\n            <span></span>\n            <translate>Custom operation</translate>\n            <small class="text-muted">{{op}}</small>\n          </label>\n          <button class="btn btn-clean showOnHover remove-btn" title="{{\'Remove\' | translate}}" ng-click="vm.removeCustomOperation(op)">\n            <i c8y-icon="minus-circle" class="text-danger"></i>\n          </button>\n        </li>\n\n    </ul>\n  </div>\n</div>\n<div class="page-footer" style="border:0">\n  <c8y-ui-button-footer>\n    <div class="row">\n      <div class="col-lg-6 col-md-12">\n        <button class="btn-add-block" ng-click="vm.addCustomOperation()">\n          <i c8y-icon="plus-square"></i> {{\'Add custom operation\' | translate}}\n        </button>\n      </div>\n    </div>\n  </c8y-ui-button-footer>\n</div>\n',t.put("core_simulators/detail/operations.html",n),t.put("/apps/core/simulators/detail/operations.html",n),n='<div ng-controller="SimulatorDetailController as vm">\n  <h1 class="title" style="display: block">\n    <c8y-inplace-input value="vm.simulator.name" maxlength="500" on-save="vm.changeSimulatorName(value)" data-required="true">\n    </c8y-inplace-input>\n  </h1>\n  <p style="text-transform: none" class="pull-right">\n    <a href="" ng-click="vm.editSimulatorInstances()" style="text-decoration: none">\n      <small class="text-muted">\n        <span translate>Number of instances: {{vm.simulator.instances}}</span>\n        <i c8y-icon="pencil"></i>\n      </small>\n    </a>\n  </p>\n  <c8y-breadcrumbs-set>\n    <c8y-breadcrumbs-item path="#simulators" label="{{\'Simulators\' | translate}}" icon="c8y-simulator"></c8y-breadcrumbs-item>\n  </c8y-breadcrumbs-set>\n</div>\n',t.put("core_simulators/detail/title.html",n),t.put("/apps/core/simulators/detail/title.html",n),n='<c8y-ui-action-bar-set>\n    <c8y-simulator-add on-added="vm.onSimulatorAdded(simulator)">\n    </c8y-simulator-add>\n\n    <button type="button" class="btn btn-link" ng-click="vm.load()" ng-disabled="vm.loading">\n      <i c8y-icon="refresh" ng-class="{\'fa-spin\': vm.loading}"></i> <span translate>Reload</span>\n    </button>\n</c8y-ui-action-bar-set>\n\n<div class="c8y-empty-state text-center" ng-show="vm.simulators.length === 0">\n  <h1 class="c8y-icon c8y-icon-simulator c8y-icon-duocolor"></h1>\n  <h3 translate>No simulators created yet</h3>\n  <p translate>Create your first Simulator.</p>\n  <p><c8y-simulator-add on-added="vm.onSimulatorAdded(simulator)"></c8y-simulator-add></p>\n  <p c8y-guide-docs><small translate>Find out more on the <a c8y-guide-href="users-guide/device-management/#simulator">User Guide</a>.</small></p>\n</div>\n\n<div class="card-group interact-grid">\n  <div ng-repeat="simulator in vm.simulators | orderBy:\'name\'" class="col-xs-12 col-sm-4 col-md-3">\n    <div class="card" ng-click="vm.edit(simulator)">\n\n      <div class="card-actions">\n        <div class="dropdown settings" uib-dropdown>\n          <a class="dropdown-toggle c8y-dropdown" title="{{\'Actions\' | translate}}" uib-dropdown-toggle ng-click="$event.stopPropagation()">\n            <span><i c8y-icon="ellipsis-v"></i></span>\n          </a>\n          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n            <li>\n              <a href="" ng-click="$event.stopPropagation();vm.edit(simulator)">\n                <i c8y-icon="edit"></i> <translate>Edit</translate>\n               </a>\n            </li>\n            <li>\n              <a href="" ng-click="$event.stopPropagation();vm.clone(simulator)">\n                <i c8y-icon="clone"></i> <translate>Clone</translate>\n               </a>\n            </li>\n            <li>\n              <a href="" ng-click="$event.stopPropagation();vm.remove(simulator)">\n                <i c8y-icon="times"></i> <translate>Remove</translate>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="card-header">\n        <div class="card-icon">\n          <i c8y-icon="c8y-simulator c8y-icon-duocolor"></i>\n        </div>\n        <div class="text-truncate card-title" title="{{simulator.name}}">\n          {{simulator.name}}\n        </div>\n      </div>\n\n      <div class="card-block">\n        <div class="row">\n          <div class="col-xs-6" ng-switch="simulator.state">\n            <label class="c8y-switch" ng-click="$event.stopPropagation()">\n              <input type="checkbox" ng-checked="simulator.state === \'RUNNING\'" ng-click="$event.stopPropagation(); simulator.state === \'RUNNING\' ? vm.pause(simulator) : vm.run(simulator);">\n              <span></span>\n              <em ng-switch-default>\n                {{simulator.state | translate | lowercase}}\n              </em>\n            </label>\n\n          </div>\n          <div class="col-xs-6 text-muted" style="line-height:32px">\n            <div class="pull-right">\n              <span title="{{\'Instances\' | translate}}">\n                <i c8y-icon="{{vm.icons.simulator}}"></i>\n                {{simulator.instances}}\n              </span>\n\n              <span title="{{\'Instructions\' | translate}}">\n                <i c8y-icon="{{vm.icons.instruction}}"></i>\n                {{simulator.commandQueue.length}}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n\n    </div>\n  </div>\n</div>\n',
t.put("core_simulators/list/list.html",n),t.put("/apps/core/simulators/list/list.html",n),n='<div class="modal-header">\n  <h3>\n    <i c8y-icon="{{vm.icons.simulator}}"></i>\n    <span translate>Clone simulator</span>\n  </h3>\n</div>\n\n<div class="modal-body">\n  <form name="simulatorCloneForm" role="form" novalidate>\n    <div class="form-group">\n      <label for="name" translate>Name</label>\n      <input id="name" name="name" type="text" class="form-control" ng-model="vm.simulator.name" required>\n      <c8y-error-feedback field="simulatorCloneForm.name"></c8y-error-feedback>\n    </div>\n  </form>\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn-primary" ng-click="vm.close({$value: vm.simulator})" ng-disabled="simulatorCloneForm.$invalid" translate>\n    Clone\n  </button>\n  <button class="btn btn-default" ng-click="vm.dismiss()" translate>\n    Cancel\n  </button>\n</div>\n',t.put("core_simulators/list/simulatorCloneDialog.html",n),t.put("/apps/core/simulators/list/simulatorCloneDialog.html",n)}angular.module("c8y.simulators").run(["$templateCache",t])}();