/* administration_tfaSettings 9.3.0 2018-03-26T16:24:18+00:00 796b68a031b1+ (release/9.3.0) tip */
!function(){"use strict";angular.module("c8y.parts.tfaSettings",[])}(),function(){"use strict";function t(t,n,e,a,i){function s(){n.isTfaAvailable().then(function(t){p.available=t}).then(l)}function l(){p.available&&_.forEach(b,r)}function r(t){var n={category:y,key:t.key},a=t.default,i=t.systemOption?e.getSystemOptionValue:e.detailValue;return i(n,a).then(_.partial(o,t))}function o(t,n){p[d(t.key)]=n}function d(t){return _.camelCase(t)}function c(n){var e=_.map(b,u);return t.all(e).then(function(){a.success(i("TFA settings updated successfully!")),n.$setPristine()})}function u(n){var a={category:y,key:n.key,value:g(n)};return f(n)?e.updateOption(a):t.when()}function g(t){return m(p[d(t.key)])}function m(t){var n=_.isNumber(t)||!isNaN(t)&&_.isString(t);return n?_.toNumber(t):t}function f(t){var n=t.readOnly,e=t.readOnlyIfTenantScopeSettingsDisabled&&!p.tenantScopeSettingsEnabled;return!t.systemOption&&!(n||e)}var p=this,v=/^[0-9]\d*$/,y="two-factor-authentication",b=[{systemOption:!0,key:"tenant-scope-settings.enabled",default:!1,readOnly:!0},{key:"enabled",default:!1},{key:"token.validity",default:43200,readOnlyIfTenantScopeSettingsDisabled:!0},{key:"pin.validity",default:30,readOnlyIfTenantScopeSettingsDisabled:!0}];_.assign(p,{$onInit:s,saveSettings:c,limitValidityRegex:v})}t.$inject=["$q","c8yUser","c8ySettings","c8yAlert","gettext"],angular.module("c8y.parts.tfaSettings").component("c8yTfaSettings",{controller:t,controllerAs:"vm",templateUrl:"administration_tfaSettings/tfa-settings.html"})}(),function(){"use strict";function t(t){var n;n='<div class="card">\n  <div class="card-header">\n    <h4 class="card-title" translate>TFA Settings</h4>\n  </div>\n  <hr>\n  <div class="card-block">\n    <form name="tfaSettingsForm" ng-submit="vm.saveSettings(tfaSettingsForm)">\n      <div class="form-group">\n        <label class="c8y-checkbox">\n          <input type="checkbox" ng-model="vm.enabled">\n          <span></span>\n          <span translate>Allow two-factor authentication</span>\n        </label>\n      </div>\n      <div ng-if="!vm.available" class="alert alert-info">\n        <translate>You cannot edit TFA settings because they are disabled on the platform level.</translate>\n      </div>\n      <div class="row">\n        <div class="col-sm-6">\n          <div class="form-group" ng-class="{\'has-error\': tfaSettingsForm.tokenValidity.$dirty && tfaSettingsForm.tokenValidity.$invalid}">\n            <label translate>Limit token validity for</label>\n            <div class="input-group">\n              <input class="form-control text-right" name="tokenValidity" maxlength="6" ng-model="vm.tokenValidity" ng-pattern="vm.limitValidityRegex" ng-disabled="!vm.tenantScopeSettingsEnabled" required>\n              <span class="input-group-addon" translate>minutes</span>\n            </div>\n          </div>\n        </div>\n        <div class="col-sm-6">\n          <div class="form-group" ng-class="{\'has-error\': tfaSettingsForm.pinValidity.$dirty && tfaSettingsForm.pinValidity.$invalid}">\n            <label translate>Limit verification code validity for</label>\n            <div class="input-group">\n              <input class="form-control text-right" maxlength="6" name="pinValidity" ng-model="vm.pinValidity" ng-pattern="vm.limitValidityRegex" ng-disabled="!vm.tenantScopeSettingsEnabled" required>\n              <span class="input-group-addon" translate>minutes</span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary" ng-disabled="tfaSettingsForm.$invalid || tfaSettingsForm.$pristine" translate>\n          Save TFA settings\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n',t.put("administration_tfaSettings/tfa-settings.html",n),t.put("/apps/administration/tfaSettings/tfa-settings.html",n)}angular.module("c8y.parts.tfaSettings").run(["$templateCache",t])}();