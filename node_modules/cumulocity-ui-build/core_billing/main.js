/* core_billing 8.21.0 2018-01-30T22:07:46+00:00 ab57d6f7e859+ (release/8.21.0) r8.21.0 */
!function(){"use strict";function n(n,e,r,a,l,i){function o(){_.includes(n.path(),"/billing")||(_.includes(n.absUrl(),"billing-finalize-upgrade=true")?r.finalizeInteractivePayment().then(function(){return l.open({component:"upgradeToStandardEditionWizard",resolve:{initialFlow:_.constant(["success"]),contractInfo:a.getContract()}}).result},function(n){return l.open({component:"upgradeToStandardEditionWizard",resolve:{initialFlow:_.constant(["failure"]),errorData:n}}).result}).finally(function(){setTimeout(function(){window.history.replaceState({},"",window.location.href.replace(/\?.*$/,"#/billing")),window.location.reload()},500)}):_.includes(n.absUrl(),"billing-finalize-payment-method-change=true")&&r.finalizeInteractivePayment().then(function(){i.success(t("Payment method has been successfully changed!"))},function(n){i.danger(n.errorMessage,n)}).finally(function(){setTimeout(function(){window.history.replaceState({},"",window.location.href.replace(/\?.*$/,"#/billing")),window.location.reload()},3e3)}))}a.getEnvironmentUrl().then(function(n){var t=document.createElement("script");t.src=e[n].url,document.head.appendChild(t),t.onload=o})}n.$inject=["$location","billingConstants","paymentGatewaySvc","customerBillingSvc","c8yWizardModal","c8yAlert"];var t=_.identity;angular.module("c8y.customerBilling",[]).constant("billingConstants",{"sandbox.billwerk.com":{url:"//sandbox.billwerk.com/selfService/billwerkjS",publicApiKey:"58d50f6414aa010288580373",paymentProvider:"FakePSP"},"app.billwerk.com":{url:"//app.billwerk.com/selfService/billwerkjS",publicApiKey:"590b2f5814a9ff0e20652a44",paymentProvider:"Heidelpay"},TITLE:t("Account")}).run(n)}(),function(){"use strict";function n(){function n(n,t,e,r){var a=n.when(!1);return t.getFlag("beta")&&(a=e.hasAllRoles(["ROLE_ACCOUNT_ADMIN"]).then(function(t){return t?r.hasContract():n.when(!1)})),a}return n.$inject=["$q","c8yBase","c8yPermissions","customerBillingSvc"],{$get:n,showIf:n}}function t(n,t,e,r){t.addNavigation({name:e("Account"),parent:e("Tenants"),icon:"briefcase",priority:1e3,path:"billing",showIf:r.showIf}),n.when("/billing",{template:"<customer-billing />"})}function e(n,t){function e(){var t=_.get(window,"c8y.collections.properties.tenants.properties.customProperties.properties");t.billwerkPlan={title:n("Payment plan"),type:"string",readonly:!0},t.billwerkContractId={title:n("Payment contract ID"),type:"string",readonly:!0}}t.then(function(n){n&&e()})}t.$inject=["c8yViewsProvider","c8yNavigatorProvider","gettext","showBillingProvider"],e.$inject=["gettext","showBilling"],angular.module("c8y.customerBilling").provider("showBilling",n).run(e).config(t)}(),function(){"use strict";function n(n,t,e){function r(){var t=m+"/configuration/billwerk/url";return n.get(t,{silentError:!0}).then(_.property("data.configurationBillwerkUrl"))}function a(){var t=u+"/selfServiceToken";return n.get(t).then(_.property("data.Token"))}function l(){var e=m+"/productinfo";return n.get(e).then(t.getResData)}function i(){return n.get(u,{silentError:!0}).then(t.getResData,_.constant(!1)).then(_.constant(!0),_.constant(!1))}function o(){return n.get(u).then(t.getResData)}function s(){var t=u+"/end";return n.post(t,{})}function c(e){var r=p;return n.post(r,e).then(t.getResData)}function d(){var e=g;return n.get(e).then(t.getResData)}var m=t.url("service/billwerk"),u=m+"/contract",p=m+"/orders",g=m+"/invoices",v=t.createEnum([{name:"TRIAL",value:"trial-tenant",label:e("Trial Edition"),trial:!0,icon:"c8y-icon c8y-icon-c8y",upgradableTo:["STANDARD","ENTERPRISE"]},{name:"STANDARD",value:"standard-tenant",label:e("Standard Edition"),trial:!1,icon:"c8y-icon c8y-icon-c8y-engine",upgradeButtonLabel:e("Upgrade to Standard Edition"),features:[e("&euro;3 per device per month"),e("50 MB storage per device"),e("5000 requests per device per month"),e("Cloud SaaS deployment")],upgradableTo:["ENTERPRISE"]},{name:"ENTERPRISE",value:"enterprise-tenant",label:e("Enterprise Edition"),trial:!1,icon:"c8y-icon c8y-icon-enterprise",upgradeButtonLabel:e("Upgrade to Enterprise Edition"),features:[e("Full branding"),e("Tenant management"),e("Resource-based access control"),e("Data broker"),e("Tenant statistics"),e("Support user")],upgradableTo:[]}]);return{PLAN_VARIANTS:v,getEnvironmentUrl:r,getUserToken:a,getProductsInfo:l,hasContract:i,getContract:o,endContract:s,placeOrder:c,getInvoices:d}}n.$inject=["$http","c8yBase","gettext"],angular.module("c8y.customerBilling").factory("customerBillingSvc",n)}(),function(){"use strict";function n(n,t,e,r,a,l,i,o,s){function c(){d(),m()}function d(){a.getContract().then(function(n){C.contractInfo=n})}function m(){t.changeTitle({title:i.TITLE})}function u(){var n=C.contractInfo.Customer;l.updateCustomerData(n).then(function(){e.success(r("Customer data is successfully updated"))},g)}function p(){var n={title:r("Are you sure?"),body:r("Do you want to close your account?"),status:"danger"};return o(n).then(a.cancelContract).then(function(){e.success(r("Your account has been closed!"))})}function g(n){e.danger(r("Could not complete the operation!"),n)}function v(){return o({templateUrl:"core_billing/upgradeToEnterprise/upgradeToEnterprise.html"})}function f(){return o({templateUrl:"core_billing/billingInfoEditor/editCustomerBillingInfo.html",scope:n})}function y(){return s.open({component:"upgradeToStandardEditionWizard",resolve:{contractInfo:_.constant(C.contractInfo)}}).result.then(d)}function h(n){l.changePaymentMethod(n).then(d).then(function(){e.success(r("Payment method has been successfully changed!"))})}function b(n){C.contractInfo.Customer=n}var C=this;_.assign(C,{$onInit:c,updateCustomerContractInfo:u,cancelCustomerContract:p,createUpgradeToEnterpriseModal:v,editBillingInfoModal:f,createUpgradeToStandardModal:y,changePaymentMethod:h,updateCustomer:b})}n.$inject=["$scope","c8yTitle","c8yAlert","gettext","customerBillingSvc","paymentGatewaySvc","billingConstants","c8yModal","c8yWizardModal"],angular.module("c8y.customerBilling").component("customerBilling",{controller:n,controllerAs:"vm",templateUrl:"core_billing/customerBilling.html"})}(),function(){"use strict";function n(n,t,e,r){function a(n){_.get(n,"contractInfo.currentValue")&&l(s.contractInfo)}function l(t){n.getProductsInfo().then(function(e){var r,a,l,i=t.CurrentPhase,o=_.last(t.Phases),c=t.PlanVariantId;"Inactive"!==o.Type&&(c=o.PlanVariantId);var d=_.find(e.PlanVariants,{Id:c}),m=!0;"Trial"===i.Type&&"Normal"===o.Type?(a=o.StartDate,l=moment(a).diff(moment(),"days")):"Inactive"===o.Type?(r=o.StartDate,m=!1,l=moment(r).diff(moment(),"days")):"Normal"===o.Type&&(a=o.StartDate);var u=_.find(n.PLAN_VARIANTS.values(),{value:d.ExternalId});s.currentPlan=_.assign(d,u),s.plansAvailableForUpgrade=_.filter(n.PLAN_VARIANTS.values(),function(n){return _.includes(s.currentPlan.upgradableTo,n.name)}),s.daysLeftInTrial=l,s.canCloseAccount=m,s.normalPhaseStartDate=a,s.inactivePhaseStartDate=r})}function i(n){var t="onCreateUpgradeTo"+_.startCase(_.toLower(n.name))+"Modal";s[t]()}function o(){var a={title:r("Are you sure?"),body:r("Do you want to close your account?"),status:"danger"};return t(a).then(n.endContract).then(function(){e.success(r("Your account will be closed at the end of current billing period!"))})}var s=this;_.assign(s,{$onChanges:a,upgradeToPlan:i,closeAccount:o})}n.$inject=["customerBillingSvc","c8yModal","c8yAlert","gettext"],angular.module("c8y.customerBilling").component("plansOverviewWidget",{controller:n,controllerAs:"vm",templateUrl:"core_billing/plansOverview/plansOverviewWidget.html",bindings:{contractInfo:"<",onCreateUpgradeToStandardModal:"&?",onCreateUpgradeToEnterpriseModal:"&?"}})}(),function(){"use strict";function n(n,t,e,r,a,l,i,o,s){function c(n){_.get(n,"contractInfo.currentValue")&&(u.Customer=u.contractInfo.Customer,m(_.get(u,"Customer.Address.Country")))}function d(){return u.toUpdateCustomer=_.cloneDeep(u.Customer),a({templateUrl:"core_billing/billing/editCustomerInfoModal.html",scope:e}).then(function(){r.updateCustomerData(u.toUpdateCustomer).then(function(){l.success(o("Customer data is successfully updated")),u.Customer=u.toUpdateCustomer,u.onCustomerUpdate({customer:u.Customer}),m(_.get(u,"Customer.Address.Country"))}).catch(function(n){l.danger(s.getString("Could not complete the operation! {{errorMessage}}",n))})})}function m(t){return _.isUndefined(t)?n.when():i.get({cca2:t}).then(function(n){u.customerCountry=_.get(n,"commonName")})}var u=this;_.assign(u,{$onChanges:c,initialized:!1,onEditBillingInfoModal:t.onEditBillingInfoModal?u.onEditBillingInfoModal:d})}n.$inject=["$q","$attrs","$scope","paymentGatewaySvc","c8yModal","c8yAlert","c8yCountriesService","gettext","gettextCatalog"],angular.module("c8y.customerBilling").component("billingInformationWidget",{controller:n,controllerAs:"vm",templateUrl:"core_billing/billing/billingInformationWidget.html",bindings:{contractInfo:"<",onEditBillingInfoModal:"&?",onCustomerUpdate:"&?"}})}(),function(){"use strict";function n(n,t){function e(){t.getAll().then(function(n){a.countries=n,_.set(a,"selectedCountry",_.find(n,{cca2:_.get(a,"customer.Address.Country")}))})}function r(){_.set(a,"customer.Address.Country",_.get(a,"selectedCountry.cca2"))}var a=this;_.assign(a,{$onInit:e,onCountrySelectionChanged:r})}n.$inject=["$scope","c8yCountriesService"],angular.module("c8y.customerBilling").component("editCustomerInfo",{templateUrl:"core_billing/billing/editCustomerInfo.html",bindings:{customer:"="},controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,t){function e(n){_.get(n,"contractInfo.currentValue")&&r(s.contractInfo)}function r(t){s.isTrial=n.isInTrial(t),s.paymentBearer=_.get(t,"PaymentBearer"),s.currentDunning=_.get(t,"currentDunning")}function a(){return l().then(i)}function l(){return t.open({component:"paymentMethodModal"}).result}function i(n){s.onPaymentMethodChange({paymentData:n})}function o(t){var e=s.contractInfo||s.paymentBearer?_.assign({},s.contractInfo,s.paymentBearer):s.paymentData;return _.get(e,"PaymentProvider")===t.paymentBearerReceived||_.get(e,"Type")===t.paymentBearerReceived||_.get(e,"bearer")===n.constructEnvironmentPaymentBearer(t.paymentBearerSent)}var s=this;_.assign(s,{PAYMENT_METHODS:n.PAYMENT_METHODS,$onChanges:e,change:a,isPaymentMethodSelected:o})}n.$inject=["paymentGatewaySvc","$uibModal"],angular.module("c8y.customerBilling").component("paymentMethodWidget",{bindings:{contractInfo:"<",onPaymentMethodChange:"&"},templateUrl:"core_billing/billing/paymentMethodWidget.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(){function n(){t.paymentData={}}var t=this;_.assign(t,{$onInit:n})}angular.module("c8y.customerBilling").component("paymentMethodModal",{templateUrl:"core_billing/billing/paymentMethodModal.html",bindings:{modalInstance:"<"},controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,t){function e(){a.paymentData=a.paymentData||{}}function r(n){n&&_.forEach(t.PAYMENT_METHODS.values(),function(e){n[e.name]&&(a.selectedPaymentType=e,a.paymentData.bearer=t.constructEnvironmentPaymentBearer(e.paymentBearerSent))})}var a=this;_.assign(a,{$onInit:e,PAYMENT_METHODS:t.PAYMENT_METHODS}),n.$watch("vm.openPaymentTypes",r,!0)}n.$inject=["$scope","paymentGatewaySvc"],angular.module("c8y.customerBilling").component("paymentMethodForm",{templateUrl:"core_billing/billing/paymentMethodForm.html",controller:n,controllerAs:"vm",bindings:{paymentData:"="}})}(),function(){"use strict";function n(n,t,e){function r(n){n.contractInfo&&d.contractInfo&&a(d.contractInfo)}function a(t){return n.all({contractStartDate:l(t),contractCurrency:i(t),inTrial:o(t),invoices:s()}).then(function(n){_.assign(d,n)})}function l(n){return _.get(n,"StartDate")}function i(n){return _.get(n,"Currency")}function o(n){return"InTrial"===_.get(n,"LifecycleStatus")}function s(){return e.getInvoices().then(function(t){return n.all(_.map(t,c))})}function c(n){return t.generateInvoiceDownloadLink(n).then(function(t){return n.downloadLink=t,n})}var d=this;_.assign(d,{$onChanges:r})}n.$inject=["$q","paymentGatewaySvc","customerBillingSvc"],angular.module("c8y.customerBilling").component("billingHistoryWidget",{controller:n,controllerAs:"vm",templateUrl:"core_billing/billing/billingHistoryWidget.html",bindings:{contractInfo:"<"}})}(),function(){"use strict";function n(n){function t(){var n=v();return!!_.get(n,"PaymentProvider")||!!_.get(n,"Type")||!!_.get(n,"bearer")}function e(){return g(n.PAYMENT_METHODS.CREDIT_CARD)}function r(){var n=v();return _.get(n,"cardNumber")||_.get(n,"Holder")}function a(){var n=v(),t=_.get(n,"CardType")||PaymentJS.fns.cardType(_.get(n,"cardNumber"));return t?"cc-"+_.toLower(t):"cc"}function l(){var n=v();return _.get(n,"Last4")||_.get(n,"cardNumber","").slice(-4)}function i(){var n=v(),t=_.get(n,"ExpiryMonth")||_.get(n,"expiryMonth"),e=_.get(n,"ExpiryYear")||_.get(n,"expiryYear");return t+"/"+e}function o(){return g(n.PAYMENT_METHODS.PAY_PAL)}function s(){var n=v();return _.get(n,"EmailAddress")||_.get(n,"emailAddress")}function c(){return g(n.PAYMENT_METHODS.INVOICE)}function d(){return g(n.PAYMENT_METHODS.DIRECT_DEBIT)}function m(){var n=v();return _.get(n,"Holder")||_.get(n,"accountHolder")}function u(){var n=v();return _.get(n,"IBAN")||_.get(n,"iban")}function p(){var n=v();return _.get(n,"BIC")||_.get(n,"bic")}function g(t){if(t){var e=v(),r=_.get(e,"PaymentProvider")===t.paymentBearerReceived,a=_.get(e,"Type")===t.paymentBearerReceived,l=_.includes(_.get(e,"bearer"),n.constructEnvironmentPaymentBearer(t.paymentBearerSent));return r||a||l}}function v(){var n;return(f.contractInfo||f.paymentBearer)&&(n=_.assign({},f.contractInfo,f.paymentBearer)),f.paymentData&&(n=f.paymentData),n}var f=this;_.assign(f,{isSelected:t,isCreditCard:e,creditCardDataAvailable:r,creditCardIcon:a,creditCardLast4:l,creditCardExpirationDate:i,isPayPal:o,payPalIcon:_.constant(_.get(n.PAYMENT_METHODS.PAY_PAL,"icon")),payPalEmailAddress:s,isInvoice:c,invoiceIcon:_.constant(_.get(n.PAYMENT_METHODS.INVOICE,"icon")),isDirectDebit:d,directDebitIcon:_.constant(_.get(n.PAYMENT_METHODS.DIRECT_DEBIT,"icon")),directDebitHolder:m,directDebitIBAN:u,directDebitBIC:p})}n.$inject=["paymentGatewaySvc"],angular.module("c8y.customerBilling").component("paymentMethodSummary",{bindings:{contractInfo:"<?",paymentBearer:"<?",paymentData:"<?"},templateUrl:"core_billing/paymentMethodSummary.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.customerBilling").component("upgradeToStandardEditionWizard",{bindings:{modalInstance:"<",resolve:"<"},templateUrl:"core_billing/upgradeToStandard/upgradeToStandardEditionWizard.html",controllerAs:"vm"})}(),function(){"use strict";function n(){function n(n){_.get(n,"prefilledCustomerData.currentValue")&&_.set(t.wizardCtrl.data,"customerData",_.cloneDeep(t.prefilledCustomerData))}var t=this;_.assign(t,{$onChanges:n})}angular.module("c8y.customerBilling").component("customerDataStep",{require:{wizardCtrl:"^c8yWizardStep"},bindings:{prefilledCustomerData:"<"},templateUrl:"core_billing/upgradeToStandard/customerDataStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.customerBilling").component("paymentDataStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"core_billing/upgradeToStandard/paymentDataStep.html",controllerAs:"vm"})}(),function(){"use strict";function n(n){function t(){var t=e.wizardCtrl.data;e.placingOrderInProgress=!0,n.upgradeToStandardPlan(t.customerData,t.paymentData).then(function(){e.wizardCtrl.goTo("success")}).catch(function(){e.wizardCtrl.goTo("placeOrder")}).finally(function(){e.placingOrderInProgress=!1})}var e=this;_.assign(e,{placingOrderInProgress:!1,placeOrder:t})}n.$inject=["paymentGatewaySvc"],angular.module("c8y.customerBilling").component("placeOrderStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"core_billing/upgradeToStandard/placeOrderStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.customerBilling").component("confirmPlanUpgrade",{bindings:{upgradeData:"<"},templateUrl:"core_billing/upgradeToStandard/confirmPlanUpgrade.html",controllerAs:"vm"})}(),function(){"use strict";function n(){return{require:"ngModel",link:function(n,t,e,r){r.$validators.vatId=function(n,t){var e=n||t||"";return BillwerkJS.validateVatId(e)}}}}angular.module("c8y.customerBilling").directive("vatId",n)}(),function(){"use strict";function n(n,t,e,r,a,l,i){function o(){t.getEnvironmentUrl().then(function(n){w=n})}function s(n){return"InvoicePayment"===n?n:n+e[w].paymentProvider}function c(){return c.promise||(c.promise=t.getUserToken().then(function(n){var t;try{t=new BillwerkJS.Portal(n)}catch(n){x(n)}return t})),n.when(c.promise)}function d(){return p({providerReturnUrl:u()+"?billing-finalize-upgrade=true"})}function m(){return p({providerReturnUrl:u()+"?billing-finalize-payment-method-change=true"})}function u(){return window.location.protocol+"//"+window.location.host+window.location.pathname}function p(t){var r=_.assign(t,_.pick(e[w],"publicApiKey"));return n(function(n,t){var e;try{e=new BillwerkJS.Payment(r,function(){n(e)},t)}catch(n){x(n)}})}function g(t){return n.all({customerPortal:c(),paymentService:m()}).then(function(e){return n(function(n,r){try{e.customerPortal.paymentChange(e.paymentService,t,n,r)}catch(n){r(n.message)}}).then(function(t){var e=n.resolve(t);return _.get(t,"Url")&&(window.location.href=t.Url,e=n.reject()),e}).catch(x)})}function v(t){return c().then(function(e){return n(function(n,r){try{e.customerChange(t,n,r)}catch(n){r(n.message)}})})}function f(t,e,r){return n(function(n,a){try{var l=new BillwerkJS.Signup;l.createOrder(t,e,function(t){b(r,t).then(function(){n()})},function(n){a(n)})}catch(n){a(n.message)}})}function y(e,r){return v(e).then(t.getProductsInfo).then(function(n){var t=_.find(n.PlanVariants,{ExternalId:"standard-tenant"});return{Cart:{PlanVariantId:t.Id}}}).then(t.placeOrder).then(function(n){return _.set(n,"OrderId",n.Id),b(r,n)}).then(function(t){var e=n.resolve(t);return _.get(t,"Url")&&(window.location.href=t.Url,e=n.reject()),e}).catch(function(n){x(n),reject()})}function h(){return n(function(n,t){try{BillwerkJS.finalize(n,t)}catch(n){x(n)}})}function b(t,e){return n.all({customerPortal:c(),paymentService:d()}).then(function(r){return n(function(n,a){try{r.customerPortal.upgradePayInteractive(r.paymentService,t,e,n,a)}catch(n){a(n.message)}})})}function C(n){return c().then(function(t){var e="";try{e=t.invoicePdfDownloadUrl(n)}catch(n){x(n)}return e})}function D(n){var t=n.CurrentPhase,e=_.last(n.Phases);return"Trial"===t.Type&&"Normal"!==e.Type}function x(n){var t=n.message||n.errorMessage;a.danger(i.getString("Error occurred: {{message}}",{message:t}))}var w,T=r.createEnum([{name:"CREDIT_CARD",label:l("Credit card"),icon:"credit-card",paymentBearerSent:"CreditCard:",paymentBearerReceived:"CreditCard"},{name:"INVOICE",label:l("Invoice"),icon:"money",paymentBearerSent:"InvoicePayment",paymentBearerReceived:"InvoicePayment"},{name:"DIRECT_DEBIT",label:l("Direct debit"),icon:"keyboard-o",paymentBearerSent:"Debit:",paymentBearerReceived:"BankAccount"}]);return o(),{PAYMENT_METHODS:T,changePaymentMethod:g,createNewPlanOrder:f,upgradeToStandardPlan:y,finalizeInteractivePayment:h,updateCustomerData:v,generateInvoiceDownloadLink:C,constructEnvironmentPaymentBearer:s,isInTrial:D}}n.$inject=["$q","customerBillingSvc","billingConstants","c8yBase","c8yAlert","gettext","gettextCatalog"],angular.module("c8y.customerBilling").factory("paymentGatewaySvc",n)}(),function(){"use strict";function n(n,t,e){function r(){return t.get(o).then(e.getResData)}function a(){return _.isUndefined(i)?r().then(function(n){return i=n}):n.when(i)}function l(n){return a().then(function(t){return _.find(t,n)})}var i,o="core_billing/resources/extracted.countries.json";return{getAll:a,get:l}}n.$inject=["$q","$http","c8yBase"],angular.module("c8y.customerBilling").factory("c8yCountriesService",n)}();var payment=function(n){function t(r){if(e[r])return e[r].exports;var a=e[r]={exports:{},id:r,loaded:!1};return n[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){(function(t){var r,a,l,i,o,s,c,d,m,u,p,g,v,f,y,h,b,C,D,x,w,T,I,P,_=[].indexOf||function(n){for(var t=0,e=this.length;t<e;t++)if(t in this&&this[t]===n)return t;return-1};a=e(1),s=/(\d{1,4})/g,o=[{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:!0},{type:"dankort",pattern:/^5019/,format:s,length:[16],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:s,length:[16],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:s,length:[16],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:s,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5018|5020|5038|6304|6703|6708|6759|676[1-3])/,format:s,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^(5[1-5]|677189)|^(222[1-9]|2[3-6]\d{2}|27[0-1]\d|2720)/,format:s,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:s,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:s,length:[16],cvcLength:[3],luhn:!0},{type:"elo",pattern:/^(4011|438935|45(1416|76|7393)|50(4175|6699|67|90[4-7])|63(6297|6368))/,format:s,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:s,length:[13,16,19],cvcLength:[3],luhn:!0}],l=function(n){var t,e,r;for(n=(n+"").replace(/\D/g,""),e=0,r=o.length;e<r;e++)if(t=o[e],t.pattern.test(n))return t},i=function(n){var t,e,r;for(e=0,r=o.length;e<r;e++)if(t=o[e],t.type===n)return t},y=function(n){var t,e,r,a,l,i;for(l=!0,i=0,e=(n+"").split("").reverse(),r=0,a=e.length;r<a;r++)t=e[r],t=parseInt(t,10),(l=!l)&&(t*=2),t>9&&(t-=9),i+=t;return i%10===0},f=function(n){var t,e;try{if(null!=n.selectionStart&&n.selectionStart!==n.selectionEnd)return!0;if(null!=("undefined"!=typeof document&&null!==document&&null!=(e=document.selection)?e.createRange:void 0)&&document.selection.createRange().text)return!0}catch(n){t=n}return!1},h=function(n){return setTimeout(function(t){return function(){var t,e;return t=n.target,e=a.val(t),e=r.fns.formatCardNumber(e),a.val(t,e),a.trigger(t,"change")}}(this))},m=function(n){var t,e,r,i,o,s,c,d,m,u,p;if(e=String.fromCharCode(n.which),/^\d+$/.test(e)){for(d=n.target,p=a.val(d),t=l(p+e),s=(p.replace(/\D/g,"")+e).length,u=[16],t&&(u=t.length),r=i=0,o=u.length;i<o;r=++i)if(m=u[r],!(s>=m&&u[r+1])&&s>=m)return;if(!f(d))return c=t&&"amex"===t.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,c.test(p)?(n.preventDefault(),a.val(d,p+" "+e),a.trigger(d,"change")):void 0}},c=function(n){var t,e;if(t=n.target,e=a.val(t),!n.meta&&8===n.which&&!f(t))return/\d\s$/.test(e)?(n.preventDefault(),a.val(t,e.replace(/\d\s$/,"")),a.trigger(t,"change")):/\s\d?$/.test(e)?(n.preventDefault(),a.val(t,e.replace(/\s\d?$/,"")),a.trigger(t,"change")):void 0},u=function(n){var t,e,r;if(t=String.fromCharCode(n.which),/^\d+$/.test(t))return e=n.target,r=a.val(e)+t,/^\d$/.test(r)&&"0"!==r&&"1"!==r?(n.preventDefault(),a.val(e,"0"+r+" / "),a.trigger(e,"change")):/^\d\d$/.test(r)?(n.preventDefault(),a.val(e,r+" / "),a.trigger(e,"change")):void 0},v=function(n){var t,e,r;if(t=String.fromCharCode(n.which),/^\d+$/.test(t))return e=n.target,r=a.val(e)+t,/^\d$/.test(r)&&"0"!==r&&"1"!==r?(n.preventDefault(),a.val(e,"0"+r),a.trigger(e,"change")):/^\d\d$/.test(r)?(n.preventDefault(),a.val(e,""+r),a.trigger(e,"change")):void 0},p=function(n){var t,e,r;if(t=String.fromCharCode(n.which),/^\d+$/.test(t))return e=n.target,r=a.val(e),/^\d\d$/.test(r)?(a.val(e,r+" / "),a.trigger(e,"change")):void 0},g=function(n){var t,e,r;if(t=String.fromCharCode(n.which),"/"===t)return e=n.target,r=a.val(e),/^\d$/.test(r)&&"0"!==r?(a.val(e,"0"+r+" / "),a.trigger(e,"change")):void 0},d=function(n){var t,e;if(!n.metaKey&&(t=n.target,e=a.val(t),8===n.which&&!f(t)))return/\d(\s|\/)+$/.test(e)?(n.preventDefault(),a.val(t,e.replace(/\d(\s|\/)*$/,"")),a.trigger(t,"change")):/\s\/\s?\d?$/.test(e)?(n.preventDefault(),a.val(t,e.replace(/\s\/\s?\d?$/,"")),a.trigger(t,"change")):void 0},T=function(n){var t;return!(!n.metaKey&&!n.ctrlKey)||(32===n.which?n.preventDefault():0===n.which||(n.which<33||(t=String.fromCharCode(n.which),/[\d\s]/.test(t)?void 0:n.preventDefault())))},C=function(n){var t,e,r,i;if(r=n.target,e=String.fromCharCode(n.which),/^\d+$/.test(e)&&!f(r))if(i=(a.val(r)+e).replace(/\D/g,""),t=l(i)){if(!(i.length<=t.length[t.length.length-1]))return n.preventDefault()}else if(!(i.length<=16))return n.preventDefault()},x=function(n,t){var e,r,l;if(r=n.target,e=String.fromCharCode(n.which),/^\d+$/.test(e)&&!f(r))return l=a.val(r)+e,l=l.replace(/\D/g,""),l.length>t?n.preventDefault():void 0},D=function(n){return x(n,6)},w=function(n){return x(n,2)},I=function(n){return x(n,4)},b=function(n){var t,e,r;if(e=n.target,t=String.fromCharCode(n.which),/^\d+$/.test(t)&&!f(e))return r=a.val(e)+t,r.length<=4?void 0:n.preventDefault()},P=function(n){var t,e,l,i,s;if(i=n.target,s=a.val(i),l=r.fns.cardType(s)||"unknown",!a.hasClass(i,l))return t=function(){var n,t,r;for(r=[],n=0,t=o.length;n<t;n++)e=o[n],r.push(e.type);return r}(),a.removeClass(i,"unknown"),a.removeClass(i,t.join(" ")),a.addClass(i,l),a.toggleClass(i,"identified","unknown"!==l),a.trigger(i,"payment.cardType",l)},r=function(){function n(){}return n.fns={cardExpiryVal:function(n){var t,e,r,a;return n=n.replace(/\s/g,""),r=n.split("/",2),t=r[0],a=r[1],2===(null!=a?a.length:void 0)&&/^\d+$/.test(a)&&(e=(new Date).getFullYear(),e=e.toString().slice(0,2),a=e+a),t=parseInt(t,10),a=parseInt(a,10),{month:t,year:a}},validateCardNumber:function(n){var t,e;return n=(n+"").replace(/\s+|-/g,""),!!/^\d+$/.test(n)&&(t=l(n),!!t&&(e=n.length,_.call(t.length,e)>=0&&(t.luhn===!1||y(n))))},validateCardExpiry:function(t,e){var r,l,i,o,s;return"object"==typeof t&&"month"in t?(o=t,t=o.month,e=o.year):"string"==typeof t&&_.call(t,"/")>=0&&(s=n.fns.cardExpiryVal(t),t=s.month,e=s.year),!(!t||!e)&&(t=a.trim(t),e=a.trim(e),!!/^\d+$/.test(t)&&(!!/^\d+$/.test(e)&&(t=parseInt(t,10),!!(t&&t<=12)&&(2===e.length&&(i=(new Date).getFullYear(),i=i.toString().slice(0,2),e=i+e),l=new Date(e,t),r=new Date,l.setMonth(l.getMonth()-1),l.setMonth(l.getMonth()+1,1),l>r))))},validateCardCVC:function(n,t){var e,r;return n=a.trim(n),!!/^\d+$/.test(n)&&(t&&i(t)?(e=n.length,_.call(null!=(r=i(t))?r.cvcLength:void 0,e)>=0):n.length>=3&&n.length<=4)},cardType:function(n){var t;return n?(null!=(t=l(n))?t.type:void 0)||null:null},formatCardNumber:function(n){var t,e,r,a;return(t=l(n))?(a=t.length[t.length.length-1],n=n.replace(/\D/g,""),n=n.slice(0,a),t.format.global?null!=(r=n.match(t.format))?r.join(" "):void 0:(e=t.format.exec(n),null!=e&&e.shift(),null!=e?e.join(" "):void 0)):n}},n.restrictNumeric=function(n){return a.on(n,"keypress",T)},n.cardExpiryVal=function(t){return n.fns.cardExpiryVal(a.val(t))},n.formatCardCVC=function(t){return n.restrictNumeric(t),a.on(t,"keypress",b),t},n.formatCardExpiry=function(t){var e,r;return n.restrictNumeric(t),t.length&&2===t.length?(e=t[0],r=t[1],this.formatCardExpiryMultiple(e,r)):(a.on(t,"keypress",D),a.on(t,"keypress",u),a.on(t,"keypress",g),a.on(t,"keypress",p),a.on(t,"keydown",d)),t},n.formatCardExpiryMultiple=function(n,t){return a.on(n,"keypress",w),a.on(n,"keypress",v),a.on(t,"keypress",I)},n.formatCardNumber=function(t){return n.restrictNumeric(t),a.on(t,"keypress",C),a.on(t,"keypress",m),a.on(t,"keydown",c),a.on(t,"keyup blur",P),a.on(t,"paste",h),t},n.getCardArray=function(){return o},n.setCardArray=function(n){return o=n,!0},n.addToCardArray=function(n){return o.push(n)},n.removeFromCardArray=function(n){var t,e;for(t in o)e=o[t],e.type===n&&o.splice(t,1);return!0},n}(),n.exports=r,t.Payment=r}).call(t,function(){return this}())},function(n,t){(function(){var t,e,r;t=function(n){return t.isDOMElement(n)?n:document.querySelectorAll(n)},t.isDOMElement=function(n){return n&&null!=n.nodeName},r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t.trim=function(n){return null===n?"":(n+"").replace(r,"")},e=/\r/g,t.val=function(n,t){var r;return arguments.length>1?n.value=t:(r=n.value,"string"==typeof r?r.replace(e,""):null===r?"":r)},t.preventDefault=function(n){return"function"==typeof n.preventDefault?void n.preventDefault():(n.returnValue=!1,!1)},t.normalizeEvent=function(n){var e;return e=n,n={which:null!=e.which?e.which:void 0,target:e.target||e.srcElement,preventDefault:function(){return t.preventDefault(e)},originalEvent:e,data:e.data||e.detail},null==n.which&&(n.which=null!=e.charCode?e.charCode:e.keyCode),n},t.on=function(n,e,r){var a,l,i,o,s,c,d,m;if(n.length)for(l=0,o=n.length;l<o;l++)a=n[l],t.on(a,e,r);else{if(!e.match(" "))return d=r,r=function(n){return n=t.normalizeEvent(n),d(n)},n.addEventListener?n.addEventListener(e,r,!1):n.attachEvent?(e="on"+e,n.attachEvent(e,r)):void(n["on"+e]=r);for(m=e.split(" "),i=0,s=m.length;i<s;i++)c=m[i],t.on(n,c,r)}},t.addClass=function(n,e){var r;return n.length?function(){var a,l,i;for(i=[],a=0,l=n.length;a<l;a++)r=n[a],i.push(t.addClass(r,e));return i}():n.classList?n.classList.add(e):n.className+=" "+e},t.hasClass=function(n,e){var r,a,l,i;if(n.length){for(a=!0,l=0,i=n.length;l<i;l++)r=n[l],a=a&&t.hasClass(r,e);return a}return n.classList?n.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(n.className)},t.removeClass=function(n,e){var r,a,l,i,o,s;if(n.length)return function(){var r,l,i;for(i=[],r=0,l=n.length;r<l;r++)a=n[r],i.push(t.removeClass(a,e));return i}();if(n.classList){for(o=e.split(" "),s=[],l=0,i=o.length;l<i;l++)r=o[l],s.push(n.classList.remove(r));return s}return n.className=n.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},t.toggleClass=function(n,e,r){var a;return n.length?function(){var l,i,o;for(o=[],l=0,i=n.length;l<i;l++)a=n[l],o.push(t.toggleClass(a,e,r));return o}():r?t.hasClass(n,e)?void 0:t.addClass(n,e):t.removeClass(n,e)},t.append=function(n,e){var r;return n.length?function(){var a,l,i;for(i=[],a=0,l=n.length;a<l;a++)r=n[a],i.push(t.append(r,e));return i}():n.insertAdjacentHTML("beforeend",e)},t.find=function(n,t){return(n instanceof NodeList||n instanceof Array)&&(n=n[0]),n.querySelectorAll(t)},t.trigger=function(n,t,e){var r,a;try{a=new CustomEvent(t,{detail:e})}catch(n){r=n,a=document.createEvent("CustomEvent"),a.initCustomEvent?a.initCustomEvent(t,!0,!0,e):a.initEvent(t,!0,!0,e)}return n.dispatchEvent(a)},n.exports=t}).call(this)}]);window.PaymentJS=_.cloneDeep(window.Payment),_.unset(window,"Payment"),function(){"use strict";function n(n){var t;t='<div class="card">\r\n  <div class="card-header">\r\n    <small class="text-uppercase" translate>\r\n      Billing history\r\n    </small>\r\n  </div>\r\n\r\n  <table class="table">\r\n    <colgroup>\r\n       <col width="0%"/>\r\n       <col width="100%"/>\r\n       <col width="0%"/>\r\n     </colgroup>\r\n    <tbody>\r\n      <tr ng-repeat="invoice in vm.invoices | orderBy:\'InvoiceDate\'">\r\n        <td class="text-muted text-nowrap" style="vertical-align: middle">\r\n          <i c8y-icon="calendar"></i>\r\n          <small>{{invoice.Created | absoluteDateTimeFormat:\'ll\'}}</small>\r\n        </td>\r\n        <td class="text-truncate" style="vertical-align: middle">\r\n          <small title="{{\'Invoice number\' | translate}}: {{invoice.InvoiceNumber}}">\r\n            <span>{{invoice.InvoiceNumber}}</span>\r\n          </small>\r\n        </td>\r\n        <td class="text-right text-nowrap" style="vertical-align: middle">\r\n          {{invoice.TotalGross | currency:vm.contractCurrency}}\r\n          <a ng-href="{{invoice.downloadLink}}" uib-tooltip="{{\'Download PDF\' | translate}}">\r\n            <i c8y-icon="file-pdf-o"></i>\r\n          </a>\r\n        </td>\r\n      </tr>\r\n      <tr ng-if="vm.inTrial">\r\n        <td class="text-muted text-nowrap" style="vertical-align: middle">\r\n          <i c8y-icon="calendar"></i>\r\n          <small>{{vm.contractStartDate | absoluteDateTimeFormat:\'ll\'}}</small>\r\n        </td>\r\n        <td class="text-truncate" style="vertical-align: middle" translate>\r\n          Trial period started\r\n        </td>\r\n        <td class="text-right text-muted text-nowrap" style="vertical-align: middle">\r\n          <small><em translate>Free</em></small>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n',
n.put("core_billing/billing/billingHistoryWidget.html",t),n.put("/apps/core/billing/billing/billingHistoryWidget.html",t),t='<div class="card">\r\n  <div class="card-header">\r\n    <small class="text-uppercase" translate>Billing information</small>\r\n    <small class="pull-right">\r\n      <a href="" ng-click="vm.onEditBillingInfoModal()" translate>edit</a>\r\n    </small>\r\n  </div>\r\n  <table class="table">\r\n    <colgroup>\r\n       <col width="120px"/>\r\n       <col width="100%"/>\r\n     </colgroup>\r\n    <tbody>\r\n      <tr>\r\n        <td class="small"><small class="text-uppercase text-muted" translate>Name</small></td>\r\n        <td class="text-truncate">{{vm.Customer.FirstName}} {{vm.Customer.LastName}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="small"><small class="text-uppercase text-muted" translate>E-mail</small></td>\r\n        <td class="text-truncate">{{vm.Customer.EmailAddress}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="small"><small class="text-uppercase text-muted" translate>Company</small></td>\r\n        <td class="text-truncate">{{vm.Customer.CompanyName}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="small"><small class="text-uppercase text-muted" translate>Address</small></td>\r\n        <td class="text-truncate">{{vm.Customer.Address.Street + \' \' + vm.Customer.Address.HouseNumber}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="small"><small class="text-uppercase text-muted" translate>ZIP / city</small></td>\r\n        <td class="text-truncate">{{vm.Customer.Address.PostalCode + \' \' + vm.Customer.Address.City}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="small"><small class="text-uppercase text-muted" translate>Country</small></td>\r\n        <td class="text-truncate">{{vm.customerCountry}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="small"><small class="text-uppercase text-muted" translate>Phone</small></td>\r\n        <td class="text-truncate">{{vm.Customer.PhoneNumber}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="small"><small class="text-uppercase text-muted" translate>VAT ID</small></td>\r\n        <td class="text-truncate">{{vm.Customer.VatId}}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n',n.put("core_billing/billing/billingInformationWidget.html",t),n.put("/apps/core/billing/billing/billingInformationWidget.html",t),t='<div class="container-fluid" style="padding: 15px 20px">\n\n  <div ng-form="vm.customerDataForm" class="row billing-edit-customer-info-modal">\n    <div class="col-sm-6">\n      <div class="form-group">\n        <label translate>First name</label>\n        <input type="text" name="FirstName" class="form-control" ng-model="vm.customer.FirstName" required/>\n        <c8y-error-feedback field="vm.customerDataForm.FirstName"></c8y-error-feedback>\n      </div>\n    </div>\n    <div class="col-sm-6">\n      <div class="form-group">\n        <label translate>Last name</label>\n        <input type="text" name="LastName" class="form-control" ng-model="vm.customer.LastName" required/>\n        <c8y-error-feedback field="vm.customerDataForm.LastName"></c8y-error-feedback>\n      </div>\n    </div>\n    <div class="col-sm-12">\n      <div class="form-group">\n        <label translate>Company</label>\n        <input type="text" name="CompanyName" class="form-control" ng-model="vm.customer.CompanyName" required/>\n        <c8y-error-feedback field="vm.customerDataForm.CompanyName"></c8y-error-feedback>\n      </div>\n    </div>\n    <div class="col-sm-12">\n      <div class="form-group">\n        <label translate>Email</label>\n        <input type="email" name="EmailAddress" class="form-control" ng-model="vm.customer.EmailAddress" required/>\n        <c8y-error-feedback field="vm.customerDataForm.EmailAddress"></c8y-error-feedback>\n      </div>\n    </div>\n    <div class="col-sm-12">\n      <div class="form-group">\n        <label translate>Phone</label>\n        <input type="text" name="PhoneNumber" class="form-control" ng-model="vm.customer.PhoneNumber" required c8y-phone-number/>\n        <c8y-error-feedback field="vm.customerDataForm.PhoneNumber"></c8y-error-feedback>\n      </div>\n    </div>\n    <div class="col-sm-8">\n      <div class="form-group">\n        <label translate>Street</label>\n        <input type="text" name="AddressStreet" class="form-control" ng-model="vm.customer.Address.Street" required/>\n        <c8y-error-feedback field="vm.customerDataForm.AddressStreet"></c8y-error-feedback>\n      </div>\n    </div>\n    <div class="col-sm-4">\n      <div class="form-group">\n        <label translate>House number</label>\n        <input type="text" name="AddressHouseNumber" class="form-control" ng-model="vm.customer.Address.HouseNumber" required/>\n        <c8y-error-feedback field="vm.customerDataForm.AddressHouseNumber"></c8y-error-feedback>\n      </div>\n    </div>\n    <div class="col-sm-4">\n      <div class="form-group">\n        <label translate>ZIP / Postal code</label>\n        <input type="text" name="AddressZip" class="form-control" ng-model="vm.customer.Address.PostalCode" required/>\n        <c8y-error-feedback field="vm.customerDataForm.AddressZip"></c8y-error-feedback>\n      </div>\n    </div>\n    <div class="col-sm-8">\n      <div class="form-group">\n        <label translate>City</label>\n        <input type="text" name="AddressCity" class="form-control" ng-model="vm.customer.Address.City" required/>\n        <c8y-error-feedback field="vm.customerDataForm.AddressCity"></c8y-error-feedback>\n      </div>\n    </div>\n    <div class="col-sm-12">\n      <div class="form-group">\n        <label>Country</label>\n        <ui-select ng-model="vm.selectedCountry" ng-change="vm.onCountrySelectionChanged()" uib-tooltip="{{\'Select country of residence\' | translate}}" style="z-index:20">\n          <ui-select-match placeholder="{{\'Select country\' | translate}}">{{vm.selectedCountry.commonName}}</ui-select-match>\n          <ui-select-choices repeat="c in vm.countries | filter: $select.search track by c.cca2 | orderBy:\'commonName\'" position="down">\n            <span ng-bind-html="c.commonName | highlight: $select.search" title="{{c.commonName}}"></span>\n            <span class="text-muted">\n              (<span ng-bind-html="c.nativeName | highlight: $select.search" title="{{c.nativeName}}"></span>)\n            </span>\n          </ui-select-choices>\n        </ui-select>\n      </div>\n    </div>\n    <div class="col-sm-12">\n      <div class="form-group">\n        <label translate>\n          VAT ID\n        </label>\n        <input type="text" name="VatId" class="form-control" ng-model="vm.customer.VatId" vat-id/>\n        <c8y-error-feedback field="vm.customerDataForm.VatId">\n          <span ng-message="vatId" translate>\n            Invalid VAT ID.\n          </span>\n        </c8y-error-feedback>\n      </div>\n    </div>\n  </div>\n</div>\n',n.put("core_billing/billing/editCustomerInfo.html",t),n.put("/apps/core/billing/billing/editCustomerInfo.html",t),t='<div class="modal-header text-center">\n  <h3 translate>\n    Billing information\n  </h3>\n</div>\n\n<div class="modal-inner-scroll" style="max-height:calc(100vh - 260px)">\n  <form name="vm.customerDataForm">\n  <edit-customer-info customer="vm.toUpdateCustomer">\n  </edit-customer-info>\n  </form>\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="dismiss()" translate>\n    Cancel\n  </button>\n  <button class="btn btn-primary" ng-disabled="vm.customerDataForm.$invalid" ng-click="close()" translate>\n    Save\n  </button>\n</div>\n',n.put("core_billing/billing/editCustomerInfoModal.html",t),n.put("/apps/core/billing/billing/editCustomerInfoModal.html",t),t='<div class="panel-title">\n  <label class="billing-toggle c8y-radio" uib-accordion-transclude="heading" ng-class="{\'text-muted\': isDisabled}">\n    <input type="radio" name="paymentMethodGroup" ng-click="toggleOpen()"/><span></span>\n    <span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">\n      {{heading}}\n    </span>\n  </label>\n</div>\n\n<div class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div ng-transclude></div>\n</div>\n',n.put("core_billing/billing/paymentMethodAccordionGroup.html",t),n.put("/apps/core/billing/billing/paymentMethodAccordionGroup.html",t),t='<p class="lead text-center" style="padding: 10px 0; margin:0" translate>\n  Pick you preferred payment method\n</p>\n\n<uib-accordion close-others="true" class="accordion-billing">\n  <div uib-accordion-group ng-if="vm.PAYMENT_METHODS.CREDIT_CARD" is-open="vm.openPaymentTypes[vm.PAYMENT_METHODS.CREDIT_CARD.name]" class="panel-default panel-billing" template-url="core_billing/billing/paymentMethodAccordionGroup.html">\n    <div uib-accordion-heading>\n      <span style="font-size: 20px; line-height: 10px">\n        <i c8y-icon="{{vm.PAYMENT_METHODS.CREDIT_CARD.icon}}"></i>\n      </span>\n      <span>\n        {{vm.PAYMENT_METHODS.CREDIT_CARD.label | translate}}\n      </span>\n    </div>\n  </div>\n\n  <div uib-accordion-group ng-if="vm.PAYMENT_METHODS.PAY_PAL" is-open="vm.openPaymentTypes[vm.PAYMENT_METHODS.PAY_PAL.name]" class="panel-default panel-billing" template-url="core_billing/billing/paymentMethodAccordionGroup.html">\n    <div uib-accordion-heading>\n      <span style="font-size: 20px; line-height: 10px">\n        <i c8y-icon="{{vm.PAYMENT_METHODS.PAY_PAL.icon}}"></i>\n      </span>\n      <span>\n        {{vm.PAYMENT_METHODS.PAY_PAL.label | translate}}\n      </span>\n    </div>\n\n    <div style="min-height: 70px">\n      <div ng-form="vm.payPalForm" class="row clearfix" ng-if="vm.selectedPaymentType === vm.PAYMENT_METHODS.PAY_PAL">\n        <div class="col-xs-12">\n          <div class="form-group">\n            <label translate>\n              E-mail address\n            </label>\n            <input type="email" name="emailAddress" class="form-control" ng-model="vm.paymentData.emailAddress" required/>\n            <c8y-error-feedback field="vm.payPalForm.emailAddress">\n            </c8y-error-feedback>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div uib-accordion-group ng-if="vm.PAYMENT_METHODS.INVOICE" is-open="vm.openPaymentTypes[vm.PAYMENT_METHODS.INVOICE.name]" class="panel-default panel-billing" template-url="core_billing/billing/paymentMethodAccordionGroup.html">\n    <div uib-accordion-heading>\n      <span style="font-size: 20px; line-height: 10px">\n        <i c8y-icon="{{vm.PAYMENT_METHODS.INVOICE.icon}}"></i>\n      </span>\n      <span>\n        {{vm.PAYMENT_METHODS.INVOICE.label | translate}}\n      </span>\n    </div>\n  </div>\n\n  <div uib-accordion-group ng-if="vm.PAYMENT_METHODS.DIRECT_DEBIT" is-open="vm.openPaymentTypes[vm.PAYMENT_METHODS.DIRECT_DEBIT.name]" class="panel-default panel-billing" template-url="core_billing/billing/paymentMethodAccordionGroup.html">\n    <div uib-accordion-heading>\n      <span style="font-size: 20px; line-height: 10px">\n        <i c8y-icon="{{vm.PAYMENT_METHODS.DIRECT_DEBIT.icon}}"></i>\n      </span>\n      <span>\n        {{vm.PAYMENT_METHODS.DIRECT_DEBIT.label | translate}}\n      </span>\n    </div>\n  </div>\n  \n</uib-accordion>\n',n.put("core_billing/billing/paymentMethodForm.html",t),n.put("/apps/core/billing/billing/paymentMethodForm.html",t),t='<div class="modal-header text-center">\n  <h3 translate>Edit payment method</h3>\n</div>\n\n<div class="modal-inner-scroll">\n  <form name="vm.paymentDataForm">\n    <payment-method-form payment-data="vm.paymentData">\n    </payment-method-form>\n  </form>\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="vm.modalInstance.dismiss()" translate>\n    Cancel\n  </button>\n  <button class="btn btn-primary" ng-disabled="vm.paymentDataForm.$invalid" ng-click="vm.modalInstance.close(vm.paymentData)">\n    Save\n  </button>\n</div>\n',n.put("core_billing/billing/paymentMethodModal.html",t),n.put("/apps/core/billing/billing/paymentMethodModal.html",t),t='<div class="card">\r\n  <div class="card-header">\r\n    <small class="text-uppercase" translate>Payment method</small>\r\n    <small class="pull-right" ng-if="!vm.isTrial">\r\n      <a href="" ng-click="vm.change()" translate>change</a>\r\n    </small>\r\n  </div>\r\n  <hr>\r\n\r\n  <div ng-if="vm.contractInfo && !vm.contractInfo.PaymentProvider" class="card-block" ng-class="{\'billing-error billing-status\': !vm.isTrial}">\r\n    <p ng-if="vm.isTrial" class="lead" style="margin-bottom:0" translate>\r\n      Currently in trial edition, upgrade to set a payment method.\r\n    </p>\r\n    <span ng-if="!vm.isTrial" class="pull-right" style="font-size: 46px">\r\n      <i c8y-icon="exclamation-triangle"></i>\r\n    </span>\r\n    <p ng-if="!vm.isTrial" class="text-center error-message" translate>\r\n      No payment method selected!<br/> Please choose payment method now.\r\n    </p>\r\n  </div>\r\n\r\n  <div ng-if="vm.contractInfo.PaymentProvider" ng-class="{\'billing-status billing-error\': vm.currentDunning}" class="card-block">\r\n    <span class="pull-right" style="font-size: 46px" ng-if="vm.currentDunning">\r\n      <i c8y-icon="exclamation-triangle"></i>\r\n    </span>\r\n    <payment-method-summary contract-info="vm.contractInfo" payment-bearer="vm.paymentBearer" payment-data="vm.paymentData">\r\n    </payment-method-summary>\r\n    <p class="text-center error-message" ng-if="vm.currentDunning" translate>\r\n      There was a problem processing your payment.<br/> Please update the payment method.\r\n    </p>\r\n  </div>\r\n\r\n  <div translate class="legend text-center">Available payment methods</div>\r\n  <table class="table">\r\n    <colgroup>\r\n       <col width="40px"/>\r\n       <col width="100%"/>\r\n     </colgroup>\r\n    <tbody>\r\n      <tr ng-repeat="paymentMethod in vm.PAYMENT_METHODS.values()" ng-class="{\'text-muted\': !vm.isPaymentMethodSelected(paymentMethod)}">\r\n        <td>\r\n          <span style="font-size: 20px; line-height: 10px">\r\n            <i c8y-icon="{{paymentMethod.icon}}"></i>\r\n          </span>\r\n        </td>\r\n        <td>\r\n          {{paymentMethod.label | translate}}\r\n          <span class="pull-right label label-default" ng-if="vm.isPaymentMethodSelected(paymentMethod)" style="margin-top: 5px" translate>\r\n            current payment method\r\n          </span>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n',n.put("core_billing/billing/paymentMethodWidget.html",t),n.put("/apps/core/billing/billing/paymentMethodWidget.html",t),t='<!-- customer billing component -->\n<div class="card">\n  <!-- plans overview componnent -->\n  <plans-overview-widget contract-info="vm.contractInfo" on-create-upgrade-to-standard-modal="vm.createUpgradeToStandardModal()" on-create-upgrade-to-enterprise-modal="vm.createUpgradeToEnterpriseModal()"></plans-overview-widget>\n</div>\n\n<div class="card-group">\n  <billing-information-widget class="col-md-4 col-xs-12" contract-info="vm.contractInfo" on-customer-update="vm.updateCustomer(customer)">\n  </billing-information-widget>\n\n  <payment-method-widget class="col-md-4 col-xs-12" contract-info="vm.contractInfo" on-payment-method-change="vm.changePaymentMethod(paymentData)">\n  </payment-method-widget>\n\n  <billing-history-widget class="col-md-4 col-xs-12" contract-info="vm.contractInfo">\n  </billing-history-widget>\n</div>\n',n.put("core_billing/customerBilling.html",t),n.put("/apps/core/billing/customerBilling.html",t),t='<div class="selected-payment-method">\n  <div ng-if="!vm.isSelected()">\n    <div style="display:inline-block">\n      <p class="lead" style="margin-bottom:0" translate>\n        No payment method selected\n      </p>\n    </div>\n  </div>\n\n  <div ng-if="vm.isCreditCard()">\n    <span style="font-size: 56px" class="text-muted">\n      <i c8y-icon="{{vm.creditCardIcon()}}"></i>\n    </span>\n    <span style="display:inline-block">\n      <p class="lead" style="margin-bottom:0">\n        <span ng-if="!vm.creditCardDataAvailable()" translate>\n          Credit card\n        </span>\n        </p><div ng-if="vm.creditCardDataAvailable()">\n          <p class="lead" style="margin-bottom:0">\n            **** **** **** <span ng-bind="vm.creditCardLast4()"></span>\n          </p>\n          <label class="small" translate>\n            Valid thru\n          </label>\n          <span>\n            {{vm.creditCardExpirationDate()}}\n          </span>\n        </div>\n      <p></p>\n    </span>\n  </div>\n\n  <div ng-if="vm.isPayPal()">\n    <span style="font-size: 46px" class="text-muted">\n      <i c8y-icon="{{::vm.payPalIcon()}}"></i>\n    </span>\n    <span style="display:inline-block">\n      <p class="lead" style="margin-bottom:0">\n        {{vm.payPalEmailAddress()}}\n      </p>\n    </span>\n  </div>\n\n  <div ng-if="vm.isInvoice()">\n    <span style="font-size: 46px" class="text-muted">\n      <i c8y-icon="{{::vm.invoiceIcon()}}"></i>\n    </span>\n    <span style="display:inline-block">\n      <p class="lead" style="margin-bottom:0" translate>\n        Invoice\n      </p>\n    </span>\n  </div>\n\n  <div ng-if="vm.isDirectDebit()">\n    <span style="font-size: 46px" class="text-muted">\n      <i c8y-icon="{{::vm.directDebitIcon()}}"></i>\n    </span>\n    <span style="display:inline-block">\n      <p class="lead" style="margin-bottom:0">\n        <span ng-if="!vm.directDebitHolder()" translate>\n          Direct debit\n        </span>\n        <span ng-bind="vm.directDebitHolder()"></span>\n      </p>\n    </span>\n    <div ng-if="vm.directDebitIBAN()">\n      <label class="small">\n        IBAN\n      </label>\n      <span>\n        {{vm.directDebitIBAN()}}\n      </span>\n    </div>\n    <div ng-if="vm.directDebitBIC()">\n      <label class="small">\n        BIC\n      </label>\n      <span>\n        {{vm.directDebitBIC()}}\n      </span>\n    </div>\n  </div>\n</div>\n',n.put("core_billing/paymentMethodSummary.html",t),n.put("/apps/core/billing/paymentMethodSummary.html",t),t='<div class="card-group-block">\r\n  <div class="col-md-8 col-xs-12 bg-primary edition-promo" style="padding-top: 40px">\r\n    <div class="row">\r\n\r\n      <div class="col-sm-2 col-xs-12">\r\n        <div class="edition-icon">\r\n          <i ng-class="vm.currentPlan.icon"></i>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="col-sm-8 col-xs-12" style="min-height: 164px">\r\n        <p class="lead" style="padding-top: 30px">\r\n          <span translate ng-if="!vm.currentPlan.trial && vm.currentPlan">Current plan</span>\r\n        </p>\r\n        <h1 class="edition-name">\r\n          {{vm.currentPlan.label | translate}}\r\n        </h1>\r\n        <p class="lead" ng-if="vm.currentPlan.trial">\r\n          <span translate>\r\n            You are currently using a trial version. Upgrade to unleash the full potential of Cumulocity\'s IoT Platform.\r\n          </span>\r\n\r\n          <br/>\r\n\r\n          <small>\r\n            <a href="http://cumulocity.com/pricing" style="color:white" target="_blank" translate>\r\n              Find out more\r\n            </a>\r\n          </small>\r\n        </p>\r\n      </div>\r\n\r\n      <div class="col-xs-12" style="padding:0">\r\n        <svg class="img-responsive" viewBox="0 0 800 73" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\r\n          <g id="clouds" transform="translate(0.000000, -8.000000)" fill-rule="nonzero" fill="#FFFFFF">\r\n            <path d="M150,29.5010406 C150,29.5010406 241.723942,-4.83292734 337.05605,15.363583 C502.3092,50.3710004 579.247784,13.4189478 650.500513,10.6524254 C754.500342,6.61172864 800,26.8092352 800,26.8092352 L800,81 L150,81 L150,29.5010406 Z" id="Shape" opacity="0.6"></path>\r\n            <path d="M0,23.0191205 C0,23.0191205 54.9127085,10.0740109 85.8483671,8.8815833 C138.217109,6.86300867 160.06201,35.8114919 209.096484,29.0659678 C225.550207,26.8024789 261.108016,16.8919326 280.464078,17.2980031 C329.186903,18.3201582 349.76158,42.8900856 400,40.5 C450.23842,38.1099144 480.881822,11.8815833 550.528908,11.8815833 C620.175993,11.8815833 641.450101,36.6673122 693.671858,40.5 C772.846687,46.3108425 749.423524,15.8736904 800,40.7671534 L800,77.5183701 L0,74.5183701 L0,23.0191205 Z" id="Shape" opacity="0.6"></path>\r\n            <path d="M152.16802,78.2830378 C152.16802,78.2830378 255.401264,9 385.503844,9 C526.373829,9 595,77.2648052 595,77.2648052 L595,81 L150,81 L152.16802,78.2830378 Z" id="Shape" opacity="0.7"></path>\r\n            <path d="M0,40.3029137 C7.94920217e-13,40.3029137 58.5546218,24.8045817 129.298917,24.8045817 C200.043213,24.8045817 227.524978,44.9014568 263.130219,44.9014568 C298.735459,44.9014568 354.013237,23.6582044 388.528971,24.8045817 C423.044704,25.950959 474.684141,49.6927067 531.261582,49.6927067 C587.839022,49.6927067 645.956957,24.4399269 677.430058,24.8045817 C766.681365,25.8386683 800,53.3213433 800,53.3213433 L800,80.8029137 L1.05119385e-12,80.8029137 L0,40.3029137 Z" id="Shape"></path>\r\n          </g>\r\n        </svg>\r\n        <div class="clearfix" style="background-color: white; color:#333; margin-top: -10px; padding-bottom: 15px; min-height: 123px">\r\n          <div class="col-sm-6" ng-if="vm.plansAvailableForUpgrade.length < 2 && vm.currentPlan.features.length">\r\n            <ul class="check-bullets success">\r\n              <li ng-repeat="feature in vm.currentPlan.features">\r\n                <span ng-bind-html="feature"></span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div class="col-sm-6" ng-repeat="plan in vm.plansAvailableForUpgrade">\r\n            <div class="flex-row">\r\n              <div style="font-size: 62px; margin-right:10px">\r\n                <span ng-class="plan.icon" class="c8y-icon-duocolor"></span>\r\n              </div>\r\n              <div>\r\n                <h4 class="text-uppercase" style="margin-bottom:10px; letter-spacing: 0.15em">\r\n                  {{plan.label | translate}}\r\n                </h4>\r\n                <button class="btn btn-success" ng-click="vm.upgradeToPlan(plan)">\r\n                  {{plan.upgradeButtonLabel | translate}}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="col-md-4 col-xs-12 text-center card-total">\r\n    <div ng-if="vm.currentPlan.trial && vm.inactivePhaseStartDate">\r\n      <p translate>\r\n        Trial expires in\r\n      </p>\r\n      <h2 class="text-muted" translate translate-n="vm.daysLeftInTrial" translate-plural="{{$count}} days">\r\n        1 day\r\n      </h2>\r\n    </div>\r\n\r\n    <div ng-if="vm.normalPhaseStartDate">\r\n      <label class="small" translate>\r\n        End of trial period\r\n      </label>\r\n      <p>\r\n        <i c8y-icon="calendar"></i>\r\n        <span>\r\n          <span ng-bind="vm.normalPhaseStartDate | absoluteDateTimeFormat:\'llll\'"></span>\r\n        </span>\r\n      </p>\r\n      <br/>\r\n      <br/>\r\n    </div>\r\n\r\n    <div ng-if="vm.currentPlan.trial">\r\n      <br/>\r\n      <br/>\r\n\r\n      <p>\r\n        <a href="mailto:sales@cumulocity.com" class="btn btn-success" style="min-width: 200px" translate>\r\n          Contact sales\r\n        </a>\r\n      </p>\r\n\r\n      <br/>\r\n      <br/>\r\n    </div>\r\n    <div ng-if="vm.currentPlan.trial">\r\n      <label class="small" translate>\r\n        End of trial period\r\n      </label>\r\n      <p>\r\n        <i c8y-icon="calendar"></i>\r\n        <span ng-bind="vm.inactivePhaseStartDate | absoluteDateTimeFormat:\'ll\'"></span>\r\n      </p>\r\n    </div>\r\n\r\n    <div ng-if="vm.normalPhaseStartDate">\r\n      <label class="small" translate>\r\n        Current balance\r\n      </label>\r\n\r\n      <p class="text-light">\r\n        <span style="font-size:46px" ng-class="{\'text-danger\': vm.contractInfo.currentDunning}">\r\n          <span style="font-size: 14px; font-weight:bold" ng-bind="vm.contractInfo.Currency"></span>\r\n          {{vm.contractInfo.Balance | currency:\'\'}}\r\n        </span>\r\n        <span class="status" ng-if="vm.contractInfo.currentDunning">\r\n          (pending)\r\n        </span>\r\n      </p>\r\n      <small class="text-muted status-text" ng-if="vm.contractInfo.currentDunning" translate>\r\n        If you change your payment settings now,<br/> this amount would be settled immediately.\r\n      </small>\r\n\r\n      <br/>\r\n\r\n      <div ng-if="!vm.inactivePhaseStartDate">\r\n        <label class="small" translate>\r\n          Next billing\r\n        </label>\r\n        <p>\r\n          <i c8y-icon="calendar"></i>\r\n          <span ng-bind="vm.contractInfo.NextBillingDate | absoluteDateTimeFormat:\'llll\'"></span>\r\n        </p>\r\n      </div>\r\n\r\n      <div ng-if="vm.inactivePhaseStartDate">\r\n        <label class="small" translate>\r\n          Last billing and closing account\r\n        </label>\r\n        <p>\r\n          <i c8y-icon="calendar"></i>\r\n          <span ng-bind="vm.inactivePhaseStartDate | absoluteDateTimeFormat:\'llll\'"></span>\r\n        </p>\r\n      </div>\r\n\r\n      <br/>\r\n    </div>\r\n\r\n    <small ng-if="vm.canCloseAccount">\r\n      <button class="btn btn-link btn-xs" ng-click="vm.closeAccount()" translate>\r\n        Close account\r\n      </button>\r\n    </small>\r\n  </div>\r\n</div>\r\n',n.put("core_billing/plansOverview/plansOverviewWidget.html",t),n.put("/apps/core/billing/plansOverview/plansOverviewWidget.html",t),t='<div class="modal-header bg-primary text-center">\n  <div style="font-size: 62px">\n    <span class="c8y-icon c8y-icon-enterprise"></span>\n  </div>\n  <h4 class="text-uppercase" style="margin:0; letter-spacing: 0.15em" translate>\n    Enterprise Edition\n  </h4>\n</div>\n\n<div class="result-message">\n  <div class="bg-complementary text-center modal-body">\n    <span class="lead text-white" translate>\n      Cumulocity\'s IoT Platform<br/>\n      tailored for your needs\n    </span>\n  </div>\n</div>\n\n<div class="modal-body text-center">\n  <ul class="check-bullets success text-left" style="display: inline-block">\n    <li translate>Online / Server platform</li>\n    <li translate>Multiple deployment options</li>\n    <li translate>Your branding and URL</li>\n    <li translate>Real-time streaming analytics</li>\n    <li translate>Device support service</li>\n    <li translate>Reseller licencing</li>\n    <li translate>Access to volume discounts</li>\n  </ul>\n</div>\n\n<div class="modal-footer text-center">\n  <p class="lead" translate>\n    Reach us by phone\n  </p>\n  <a href="tel:+49123456789" class="btn btn-primary">\n    <i c8y-icon="phone"></i> +49 123 456 789\n  </a>\n  <br/>\n  <br/>\n  <p class="lead" translate>\n    or by email\n  </p>\n  <a href="mailto:sales@cumulocity.com" class="btn btn-primary">\n    <i c8y-icon="envelope"></i> sales@cumulocity.com\n  </a>\n</div>\n',n.put("core_billing/upgradeToEnterprise/upgradeToEnterprise.html",t),n.put("/apps/core/billing/upgradeToEnterprise/upgradeToEnterprise.html",t),t='<div>\n  <p class="lead text-center" style="margin-top: 15px">\n    Please confirm all your data and submit\n  </p>\n  <table class="table">\n    <colgroup>\n     <col width="80px"/>\n     <col width="100%"/>\n   </colgroup>\n    <tbody>\n      <tr>\n        <td class="small">\n          <small class="text-uppercase text-muted" translate>\n            Name\n          </small>\n        </td>\n        <td class="text-truncate">\n          {{vm.upgradeData.customerData.FirstName}}\n          {{vm.upgradeData.customerData.LastName}}\n        </td>\n      </tr>\n      <tr>\n        <td class="small">\n          <small class="text-uppercase text-muted" translate>\n            E-mail\n          </small>\n        </td>\n        <td class="text-truncate">\n          {{vm.upgradeData.customerData.EmailAddress}}\n        </td>\n      </tr>\n      <tr>\n        <td class="small">\n          <small class="text-uppercase text-muted" translate>\n            Company\n          </small>\n        </td>\n        <td class="text-truncate">\n          {{vm.upgradeData.customerData.CompanyName}}\n        </td>\n      </tr>\n      <tr>\n        <td class="small">\n          <small class="text-uppercase text-muted" translate>\n            Address\n          </small>\n        </td>\n        <td class="text-truncate">\n          {{vm.upgradeData.customerData.Address.Street}}\n          {{vm.upgradeData.customerData.Address.HouseNumber}}\n        </td>\n      </tr>\n      <tr>\n        <td class="small">\n          <small class="text-uppercase text-muted" translate>\n            ZIP / city\n          </small>\n        </td>\n        <td class="text-truncate">\n          {{vm.upgradeData.customerData.Address.PostalCode}}\n          {{vm.upgradeData.customerData.Address.City}}\n        </td>\n      </tr>\n      <tr>\n        <td class="small">\n          <small class="text-uppercase text-muted" translate>\n            Country\n          </small>\n        </td>\n        <td class="text-truncate">\n          {{vm.upgradeData.customerData.Address.Country}}\n        </td>\n      </tr>\n      <tr>\n        <td class="small">\n          <small class="text-uppercase text-muted" translate>\n            Phone\n          </small>\n        </td>\n        <td class="text-truncate">\n          {{vm.upgradeData.customerData.PhoneNumber}}\n        </td>\n      </tr>\n      <tr>\n        <td class="small">\n          <small class="text-uppercase text-muted" translate>\n            VAT ID\n          </small>\n        </td>\n        <td class="text-truncate">\n          {{vm.upgradeData.customerData.VatId}}\n        </td>\n      </tr>\n      <tr>\n        <td class="small">\n          <small class="text-uppercase text-muted" translate>\n            Payment method\n          </small>\n        </td>\n        <td class="text-truncate">\n          <payment-method-summary payment-data="vm.upgradeData.paymentData">\n          </payment-method-summary>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n',n.put("core_billing/upgradeToStandard/confirmPlanUpgrade.html",t),n.put("/apps/core/billing/upgradeToStandard/confirmPlanUpgrade.html",t),t='<div class="modal-inner-scroll edition-modal">\r\n<form name="customerDataForm" novalidate>\r\n  <edit-customer-info customer="vm.wizardCtrl.data.customerData">\r\n  </edit-customer-info>\r\n</form>\r\n</div>\r\n<div class="c8y-wizard-footer modal-footer">\r\n  <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>\r\n    Cancel\r\n  </button>\r\n  <button class="btn btn-primary" ng-click="vm.wizardCtrl.goTo(\'paymentData\')" ng-disabled="customerDataForm.$invalid" translate>\r\n    Next\r\n  </button>\r\n</div>\r\n',n.put("core_billing/upgradeToStandard/customerDataStep.html",t),n.put("/apps/core/billing/upgradeToStandard/customerDataStep.html",t),t='<div class="modal-inner-scroll edition-modal">\r\n<form name="paymentDataForm" novalidate>\r\n  <payment-method-form payment-data="vm.wizardCtrl.data.paymentData">\r\n  </payment-method-form>\r\n</form>\r\n</div>\r\n<div class="c8y-wizard-footer modal-footer">\r\n  <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>\r\n    Cancel\r\n  </button>\r\n  <button class="btn btn-primary" ng-click="vm.wizardCtrl.goTo(\'placeOrder\')" ng-disabled="!vm.wizardCtrl.data.paymentData.bearer || paymentDataForm.$invalid" translate>\r\n    Next\r\n  </button>\r\n</div>\r\n',n.put("core_billing/upgradeToStandard/paymentDataStep.html",t),n.put("/apps/core/billing/upgradeToStandard/paymentDataStep.html",t),t='<div class="modal-inner-scroll edition-modal">\r\n<confirm-plan-upgrade upgrade-data="vm.wizardCtrl.data">\r\n</confirm-plan-upgrade>\r\n</div>\r\n\r\n<div class="c8y-wizard-footer modal-footer">\r\n  <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" ng-disabled="vm.placingOrderInProgress" translate>\r\n    Cancel\r\n  </button>\r\n  <button class="btn btn-primary" ng-click="vm.placeOrder()" ng-disabled="vm.placingOrderInProgress">\r\n    <span ng-hide="vm.placingOrderInProgress" translate>\r\n      Place order\r\n    </span>\r\n    <span ng-show="vm.placingOrderInProgress">\r\n      <i c8y-icon="circle-o-notch" class="fa-spin"></i>\r\n      <translate>Placing order</translate>&hellip;\r\n    </span>\r\n  </button>\r\n</div>\r\n',
n.put("core_billing/upgradeToStandard/placeOrderStep.html",t),n.put("/apps/core/billing/upgradeToStandard/placeOrderStep.html",t),t='<c8y-wizard on-dismiss="vm.modalInstance.dismiss()" on-close="vm.modalInstance.close()" initial-flow="vm.resolve.initialFlow">\r\n  <header>\r\n    <div style="font-size: 62px">\r\n      <span class="c8y-icon c8y-icon-c8y-engine"></span>\r\n    </div>\r\n    <h4 class="text-uppercase" style="margin:0; letter-spacing: 0.15em" translate>\r\n      Standard Edition\r\n    </h4>\r\n  </header>\r\n  <steps>\r\n    <c8y-wizard-step step-id="customerData" label="\'Billing information\' | translate">\r\n      <customer-data-step prefilled-customer-data="vm.resolve.contractInfo.Customer">\r\n      </customer-data-step>\r\n    </c8y-wizard-step>\r\n    <c8y-wizard-step step-id="paymentData" label="\'Payment method\' | translate">\r\n      <payment-data-step></payment-data-step>\r\n    </c8y-wizard-step>\r\n    <c8y-wizard-step step-id="placeOrder" label="\'Place order\' | translate">\r\n      <place-order-step></place-order-step>\r\n    </c8y-wizard-step>\r\n    <c8y-wizard-step step-id="success" modal-header-class="bg-complementary">\r\n      <div class="result-message">\r\n        <div class="modal-inner-scroll edition-modal bg-complementary active text-center" style="height:225px">\r\n          <span style="font-size: 66px">\r\n            <i c8y-icon="check"></i>\r\n          </span><br>\r\n          <span class="lead" style="vertical-align: text-bottom" translate>\r\n            Upgrade completed!\r\n          </span>\r\n          <br>\r\n          <br>\r\n          <p translate>\r\n            We will use the provided information on the next<br/> billing cycle, starting on {{vm.resolve.contractInfo.NextBillingDate | absoluteDateTimeFormat:\'ll\'}}.\r\n          </p>\r\n        </div>\r\n        <div class="c8y-wizard-footer">\r\n          <button class="btn btn-default" ng-click="$parent.wizardCtrl.close()" translate>\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </c8y-wizard-step>\r\n\r\n    <c8y-wizard-step step-id="failure">\r\n      <div class="result-message">\r\n        <div class="modal-inner-scroll edition-modal bg-dark-danger text-center" style="height:225px">\r\n          <br>\r\n          <span style="font-size: 46px">\r\n            <i c8y-icon="exclamation-triangle"></i>\r\n          </span>\r\n          <span class="lead" style="vertical-align: text-bottom" translate>\r\n            Ooops, there was a problem\r\n          </span>\r\n          <p translate>An error occurred during the upgrade process:</p>\r\n          <p><em>{{vm.resolve.errorData.errorMessage | translate}}</em></p>\r\n          <br>\r\n          <p translate>\r\n            Please retry or <a href="mailto:support@cumulocity.com">reach us</a> if you\'re not able to upgrade.\r\n          </p>\r\n        </div>\r\n        <div class="c8y-wizard-footer">\r\n          <button class="btn btn-default" ng-click="$parent.wizardCtrl.dismiss()" translate>\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </c8y-wizard-step>\r\n  </steps>\r\n</c8y-wizard>\r\n',n.put("core_billing/upgradeToStandard/upgradeToStandardEditionWizard.html",t),n.put("/apps/core/billing/upgradeToStandard/upgradeToStandardEditionWizard.html",t),t='<div class="modal-header bg-primary text-center">\n  <div style="font-size: 62px">\n    <span class="c8y-icon c8y-icon-administration-reverse"></span>\n  </div>\n  <h4 class="text-uppercase" style="margin:0; letter-spacing: 0.15em" translate>\n    Standard Edition\n  </h4>\n</div>\n\n<div class="modal-body">\n  <pre>{{vm.upgradeData|json}}</pre>\n\n  <!-- each step must be validated before proceeding to the next. please discuss the process with me as the feedback and flow involves some logic -->\n  <uib-tabset active="active" justified="true" class="steps-navbar" ng-show="active != 3">\n    <uib-tab index="0" heading="{{\'Billing information\' | translate}}" ng-class="{\'success\': active > 2}">\n      <div ng-form name="vm.customerDataForm">\n        <edit-customer-info customer="vm.upgradeData.customerData"></edit-customer-info>\n      </div>\n    </uib-tab>\n\n    <uib-tab index="1" heading="{{\'Payment method\' | translate}}" disable="true" ng-class="{\'success\': active > 2}">\n      <div ng-form name="vm.paymentDataForm">\n        <payment-method-form payment-data="vm.upgradeData.paymentData"></payment-method-form>\n      </div>\n    </uib-tab>\n\n    <uib-tab index="2" heading="{{\'Place order\' | translate}}" disable="true" ng-class="{\'success\': active > 3}">\n      <confirm-plan-upgrade upgrade-data="vm.upgradeData"></confirm-plan-upgrade>\n    </uib-tab>\n\n    <!-- this is for demo purposes -->\n    <uib-tab index="3" heading="result" disable="true" style="display: none">\n    </uib-tab>\n  </uib-tabset>\n\n  <div class="result-message" ng-show="active === 3">\n    <div class="bg-success text-center">\n    <span style="font-size: 46px">\n      <i c8y-icon="check"></i>\n    </span>\n      <span class="lead" style="vertical-align: text-bottom" translate>\n      Upgrade completed\n    </span>\n    </div>\n    <div class="modal-body text-center">\n      <p class="lead" translate>Your upgrade was successfully completed.</p>\n      <p translate>We will use the provided information on the next billing cycle.</p>\n    </div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="vm.modalInstance.dismiss()" ng-show="active != 3" translate>Cancel</button>\n  <button class="btn btn-primary" ng-click="active = 1" ng-show="active === 0" ng-disabled="vm.customerDataForm.$invalid" translate>Next</button>\n  <button class="btn btn-primary" ng-click="active = 2" ng-show="active === 1" ng-disabled="vm.paymentDataForm.$invalid" translate>Next</button>\n  <button class="btn btn-primary" ng-show="active === 2" ng-click="vm.placeOrder()" translate>Place order</button>\n  <button class="btn btn-primary" ng-show="active === 3" ng-click="vm.modalInstace.dismiss()" translate>Close</button>\n</div>\n',n.put("core_billing/upgradeToStandard/upgradeToStandardModal.html",t),n.put("/apps/core/billing/upgradeToStandard/upgradeToStandardModal.html",t)}angular.module("c8y.customerBilling").run(["$templateCache",n])}();