/* core_assetTable 9.3.0 2018-03-26T16:24:19+00:00 796b68a031b1+ (release/9.3.0) tip */
!function(){"use strict";function t(t,n,e,a){t.add({name:a("Asset table"),description:a("List of child devices of an asset with configurable columns."),templateUrl:"core_assetTable/views/assets2.html",configTemplateUrl:"core_assetTable/views/assetsConfig2.html",options:{groupsSelectable:!0}}),n.register("iconMap",{templateUrl:"core_assetTable/views/iconMap2.html",configTemplateUrl:"core_assetTable/views/configIconMap2.html",configController:"configIconMapCtrl",humanName:a("Icon"),description:a("Shows a different value for each configured value.")}),n.register("alarmStatus",{templateUrl:"core_assetTable/views/rendererAlarmStatus.html",humanName:a("Active Alarm Status"),description:a("Shows the active alarms for device")}),n.register("operationButton",{templateUrl:"core_assetTable/views/rendererButton.html",configTemplateUrl:"core_assetTable/views/rendererButtonConfig.html",configController:"RendererButtonConfigCtrl",humanName:a("Operation Button"),description:a("Button to execute an operation on a device")}),e.register("createOperation",["c8yDeviceControl","object",function(t,n){return function(e){var a=_.cloneDeep(e);return a.deviceId=n.id,t.createWithNotifications(a)}}],{label:a("Create operation")}),e.register("toggleMaintenanceMode",["c8yDevices","object",function(t,n){return function(){return t.switchResponseInterval(n)}}],{label:a("Toggle maintenance mode"),attachIf:["c8yDevices","target",function(t,n){return t.canSwitchResponseInterval(n)}]})}angular.module("c8y.assets",["ui.sortable"]).config(["c8yComponentsProvider","c8yRenderersProvider","c8yObjectActionsProvider","gettext",t])}(),function(){"use strict";function t(t,n,e){function a(t,n,e){var a,o=_.find(s.values(),{value:t})||s.EQUAL;switch(isNaN(Number(n))||(n=Number(n)),isNaN(Number(e))||(e=Number(e)),o){case s.EQUAL:a=n===e;break;case s.NOT_EQUAL:a=n!==e;break;case s.GREATER_THAN_OR_EQUAL:a=n>=e;break;case s.GREATER_THAN:a=n>e;break;case s.LESS_THAN_OR_EQUAL:a=n<=e;break;case s.LESS_THAN:a=n<e}return a}function o(t){return i[t]||t}var s=n.createEnum([{name:"EQUAL",value:"EQUAL",label:e("Equal")},{name:"NOT_EQUAL",value:"NOT_EQUAL",label:e("Not equal")},{name:"GREATER_THAN_OR_EQUAL",value:"GREATER_THAN_OR_EQUAL",label:e("Greater than or equal")},{name:"GREATER_THAN",value:"GREATER_THAN",label:e("Greater than")},{name:"LESS_THAN_OR_EQUAL",value:"LESS_THAN_OR_EQUAL",label:e("Less than or equal")},{name:"LESS_THAN",value:"LESS_THAN",label:e("Less than")}]),i={Equal:s.EQUAL.value,"Not equal":s.NOT_EQUAL.value,"Greater then or equal":s.LESS_THAN_OR_EQUAL.value,"Greater than":s.LESS_THAN.value,"Less than or equal":s.GREATER_THAN_OR_EQUAL.value,"Less than":s.GREATER_THAN.value};return{Comparisons:s,compare:a,convertDeprecatedComparisonType:o}}angular.module("c8y.assets").factory("c8yComparisons",["$q","c8yBase","gettext",t])}(),function(){"use strict";function t(t,n,e,a,o,s,i,l,c,r,d){function p(n){t.properties=[],t.renderedDevices=O={},t.parentId=n.device&&n.device.id||n.options&&n.options.parentId,r.list().then(angular.bind(d,d.filterAndExtendWithStoredProperties,t.child.config.options.properties)).then(u).then(function(n){t.properties=n,t.parentId?g(t.parentId).then(m).then(h):t.devices=_.map(t.devices,S)})}function u(t){return _.filter(t,"__active")}function m(e){return n.all(_.map(e,function(n){return a.detailRealtime(n,t)})).then(_.flattenDeep)}function g(t){return n.all([a.childDevices(t),a.childAssets(t)]).then(_.flattenDeep)}function h(n){t.devices=n,b(t.parentId)}function b(n){return a.detailRealtime(n,t).then(v)}function v(n){o.isGroup(n)||(t.devices||(t.devices=[]),t.devices.push(n))}function y(t,n){return A(t,n)}function f(t,n){var e=null;return w(n)&&(e=d.getAssetLink(t)),e}function w(n){return n===_.findIndex(t.properties,function(t){return _.isUndefined(t.renderType)})}function A(t,n){for(var e=0;e<(n||[]).length&&(null!==t&&void 0!==t);e++)t=t[n[e]];return t}function x(n){_.isArray(n)&&(n=n.join(".")),t.devices=e("orderBy")(t.devices,n),t.$broadcast("c8yScrollLoad::refresh")}function T(t){_.isArray(t)&&(t=t.join(".")),x("-"+t)}function k(n){t.child.config.options.arrows[n]=!t.child.config.options.arrows[n]}function C(n){return!!t.child.config.options.arrows[n]}function S(n){return c.attach(n),l.attach(n,t.properties),n}function $(n,e){n&&!_.isEqual(n,e)&&p(t.child.config)}function M(t){var n=t.id;O[n]||(S(t),O[n]=!0)}function E(){return Boolean(t.devices&&t.devices.length===_.keys(O).length)}var O={};t.$watch("child.config",$),t.getArrows=C,t.orderBy=x,t.orderDownBy=T,t.buildFields=y,t.getAssetLinkIfNeeded=f,t.setArrows=k,t.renderedDevices=O,t.renderDevice=M,t.renderedAllDevices=E,p(t.child.config)}angular.module("c8y.assets").controller("AssetsCtrl",["$scope","$q","$filter","c8yInventory","c8yGroups","c8yBase","c8yDevices","c8yComputedProperties","c8yObjectActions","c8yPropertiesLibrary","assetsSvc",t])}(),function(){"use strict";function t(t,n,e,a,o,s){function i(t){t&&n.all([a.detail(t).then(e.getResData),a.childDevices(t),a.childAssets(t)]).then(_.flattenDeep).then(l)}function l(n){t.deviceTypes=_(n).map("type").filter(_.indentity).uniq().value()}function c(){t.forms.componentForm.$setValidity("propertySelected",_.filter(t.config.options.properties,"__active").length>0)}function r(n){t.config.options.properties=_.map(n,function(t){var n=["id","label","config","renderType","renderConfig","isAction","__active","computed","type","keyPath"];return t.id&&"c8yCustom"===_.head(t.id.split("!!"))&&(n.push("properties"),n.push("printFormat")),_.pick(t,n)}),c()}function d(){t.config.options=t.config.options||{},t.config.options.properties=t.config.options.properties||[],t.defaultProperties=t.config.options.properties&&_.map(t.config.options.properties,"id")||p,o.list().then(angular.bind(s,s.filterAndExtendWithStoredProperties,t.config.options.properties)).then(function(n){t.properties=n}),c()}var p=["c8ySchema!!id","c8ySchema!!name","c8ySchema!!type"];d(),t.$watch("config.device",i),t.$watch("properties",r,!0)}angular.module("c8y.assets").controller("AssetsTableConfigCtrl",["$scope","$q","c8yBase","c8yInventory","c8yPropertiesLibrary","assetsSvc",t])}(),function(){"use strict";function t(t){function n(t,n){var e=_(t).map(function(t){var e=_.find(n,function(n){return n.id===t.id});return _.assign(e||{},t)}).value();return e.length?e:void 0}function e(n){var e=t.isGroup(n)?"group":"device",a="";return _.has(n,"id")&&(a="#/"+e+"/"+n.id),a}return{filterAndExtendWithStoredProperties:n,getAssetLink:e}}t.$inject=["c8yGroups"],angular.module("c8y.assets").factory("assetsSvc",t)}(),function(){"use strict";function t(){function t(t,n,e,a){function o(){l=null,t.visibility="hidden"}function s(){var n="down"===l?"up":"down";t.$apply(function(){a.click(t),i(n)})}function i(n){var e=n+"Action";l=n,t.downCss=t.upCss=null,t[n+"Css"]=r,t.visibility="visible",t[e]&&t[e]()}var l,c=n.parent(),r={color:"#000"};c.css({cursor:"pointer"}).on("click",function(t){t.preventDefault(),s()}),t.sort=i,t.visibility="hidden",t.otherClicked=o,a.add(t)}return{restrict:"E",templateUrl:"core_assetTable/views/sort2.html",require:"^c8ySortGroup",link:t,scope:{downAction:"&",upAction:"&"}}}function n(){function t(){var t=[];return{add:function(n){t.push(n)},click:function(n){_(t).filter(function(t){return t!==n}).invokeMap("otherClicked").value()}}}return{restrict:"A",controller:t}}angular.module("c8y.assets").directive("c8ySort",t).directive("c8ySortGroup",n)}(),function(){"use strict";function t(t,n){function e(){var e=t.value,a=t.config||{},o=a.map||[],s=_.find(o,function(t){return n.compare(n.convertDeprecatedComparisonType(t.comparison),e,t.value)});t.icon=s&&s.icon,t.color=s&&s.color}t.$watch("value",e),t.$watch("config",e)}angular.module("c8y.assets").controller("RendererIconCtrl",["$scope","c8yComparisons",t])}(),function(){"use strict";function t(t,n,e,a,o){function s(){a.map||(a.map=[_.clone(c)]),a.map=_.map(a.map,function(t){return t.comparison=o.convertDeprecatedComparisonType(t.comparison),t}),t.iconMap=a}function i(t){t.push(_.cloneDeep(c))}function l(t,n){t.splice(n,1)}var c={value:"",comparison:"",icon:"",color:"#000000"};t.comparisons=o.Comparisons.values(),t.icons=e,t.addMap=i,t.onDelete=l,t.close=n.close,t.dismiss=n.dismiss,s()}angular.module("c8y.assets").controller("configIconMapCtrl",["$scope","$uibModalInstance","iconList","config","c8yComparisons",t])}(),function(){"use strict";function t(t,n,e,a){function o(){var n=t.config,e=t.obj;e&&n&&(_.isFunction(n.hideIf)&&(t.hidden=n.hideIf(e)),_.isFunction(n.disableIf)&&(t.disabled=n.disableIf(e)))}function s(){var n=t.value;return _.isFunction(n)}function i(){var n,e=t.value,a=t.obj,o=t.config,s=o.args;_.isFunction(e)&&(s?a&&(n=e.apply(a,s)):n=e()),n&&(t.pending=!0,n.then(l,r))}function l(t){var a=c(t);if(a){var o=t;o.created.then(function(){n.success(e("Operation created successfully."))},d),o.completed.then(function(){d(),n.success(e("Operation completed successfully."))},d)}else d(),n.success(e("Operation executed successfully."))}function c(t){return!!(t&&t.created&&t.created.then&&t.completed&&t.completed.then)}function r(){d(),n.danger(e("Operation failed."))}function d(){t.pending=!1}function p(t){return t||e("Run")}t.isApplicable=s,t.click=i,t.$watch("value",o),t.$watch("obj",o),t.$watch("config",o),t.getBtnText=p}angular.module("c8y.assets").controller("RendererButtonCtrl",["$scope","c8yAlert","gettext","gettextCatalog",t])}(),function(){"use strict";function t(t,n,e,a,o,s,i){function l(){var t=[];_.map(f,function(n){t.push(c(n))}),e.all(t).then(_.flattenDeep).then(r)}function c(t){return a.getCommandTemplatesForDeviceType(t).then(_.identity,function(){return[]})}function r(t){y.length=0,_.forEach(t,function(t){y.push({name:i.getString(t.name),text:t.command,category:i.getString(t.category),deviceType:t.deviceType})})}function d(t,n){m({description:t,c8y_Command:{text:n}})}function p(n){return"undefined"!=typeof n?void(t.showEditor=n):void(t.showEditor=!t.showEditor)}function u(t){p(!0),d(t.name,t.text)}function m(t){o.args=[t]}function g(){o.args&&o.args.length||d(i.getString("Operation description"),"<command>")}function h(){n.close(o)}function b(){return t.showEditor?"caret-square-o-up":"caret-square-o-down"}function v(){return s(t.showEditor?"Click to hide command editor":"Click to view command editor")}var y=[],f=o.deviceTypes||[];t.showEditor=!1,t.config=o,t.commandTemplates=y,t.chooseOperation=u,t.close=h,t.expandTooltip=v,t.expandIcon=b,t.toggleEditor=p,t.dismiss=n.dismiss,t.data={},g(),l()}angular.module("c8y.assets").controller("RendererButtonConfigCtrl",["$scope","$uibModalInstance","$q","c8yDeviceShell","config","gettext","gettextCatalog",t])}(),function(){"use strict";function t(t){var n;n='<form name="addIconMapForm" novalidate>\n<div class="modal-header" ng-show="title">\n  <h3>{{title | translate}}</h3>\n</div>\n<div class="modal-body">\n    <button class="btn btn-xs btn-primary pull-right text-center" data-ng-click="addIconMap()">\n      <i c8y-icon="plus"></i>{{ \'Add icon map\' | translate}}\n    </button>\n    <table class="table table-condensed" data-ng-repeat="iconMap in iconsMap track by $index">\n      <thead>\n      <tr>\n        <th class="col-lg-9" translate>Name</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr>\n        <td>\n          <input class="form-control" type="text" ng-model="iconMap.name" required>\n        </td>\n        <td>\n          <button data-ng-disabled="iconsMap.length < 2" class="btn btn-danger btn-xs showOnHover pull-right" title="{{\'Add map\' | translate}}" data-ng-click="onDelete(iconsMap, $index)">\n            <i c8y-icon="times"></i>\n          </button>\n        </td>\n      </tr>\n      <tr>\n        <td colspan="7">\n          <table class="table table-condensed" ng-show="iconMap.map.length">\n            <thead>\n            <tr>\n              <th class="col-lg-3" translate>Value</th>\n              <th class="col-lg-3" translate>Comparison</th>\n              <th class="col-lg-3" translate>Icon</th>\n              <th translate>Color</th>\n              <th>\n                <button class="btn btn-primary btn-xs pull-right text-center" data-ng-click="addMap(iconMap.map)">\n                  <i c8y-icon="plus"></i>\n                </button>\n              </th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr data-ng-repeat="map in iconMap.map track by $index">\n              <td>\n                <input class="form-control" type="text" ng-model="map.value" required>\n              </td>\n              <td class="text-center">\n                <select class="form-control" data-ng-options="comparison for comparison in comparisons" ng-model="map.comparison" required></select>\n              </td>\n              <td>\n                <ui-select ng-model="map.icon">\n                  <ui-select-match placeholder="{{\'Select or search icon\' | translate}}">\n                    <i c8y-icon="{{$select.selected}}"></i>\n                    {{$select.selected}}\n                  </ui-select-match>\n                  <ui-select-choices repeat="icon in icons | filter: $select.search">\n                    <div>\n                      <i c8y-icon="{{icon}}"></i> {{icon}}\n                    </div>\n                  </ui-select-choices>\n                </ui-select>\n              </td>\n              <td>\n                <input c8y-color-picker type="text" class="form-control" name="color" ng-model="map.color"/>\n              </td>\n              <td>\n                <button data-ng-disabled="iconMap.map.length < 2" class="btn btn-danger btn-xs showOnHover pull-right" title="{{\'Add map\' | translate}}" data-ng-click="onDelete(iconMap.map, $index)">\n                  <i c8y-icon="times"></i>\n                </button>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-primary" data-ng-disabled="addIconMapForm.$invalid" ng-click="close()" translate>OK</button>\n  <button class="btn btn-default" ng-click="dismiss()" translate>Cancel</button>\n</div>\n</form>\n',t.put("core_assetTable/views/addIconMap.html",n),t.put("/apps/core/assetTable/views/addIconMap.html",n),n='<form name="addOperationForm" novalidate>\n  <div class="modal-header" ng-show="title">\n    <h3>{{title | translate}}</h3>\n  </div>\n  <div class="modal-body">\n      <div class="form-group col-lg-12" ng-class="{\'has-error\': addOperationForm.$dirty && addOperationForm.$invalid}">\n        <textarea c8y-code-editor="json" class="form-control" name="operation" ng-model="operation.json" uib-tooltip="{{placeholder(param) | translate}}" style="height: 250px" required></textarea>\n      </div>\n      <div class="input-group">\n        <ui-select ng-model="operation.chosen">\n          <ui-select-match placeholder="{{\'Select or search operation\' | translate}}">\n            <div>\n              <span class="list-group-item-heading">{{$select.selected.name}} <small ng-show="$select.selected.category" class="text-muted">{{$select.selected.category}}</small></span>\n              <span class="list-group-item-text"><small class="text-muted">{{$select.selected.text | translate}}</small></span>\n            </div>\n          </ui-select-match>\n          <ui-select-choices repeat="operation in commandTemplates | filter: $select.search">\n            <div>\n              <span class="list-group-item-heading">{{operation.name}} <small ng-show="operation.category" class="text-muted">{{operation.category}}</small></span>\n              <span class="list-group-item-text"><small class="text-muted">{{operation.text | translate}}</small></span>\n            </div>\n          </ui-select-choices>\n        </ui-select>\n        <span class="input-group-btn" style="vertical-align: top">\n          <button class="btn btn-primary" type="button" ng-click="chooseOperation(operation.chosen)" uib-tooltip="{{\'Use this operation\' | translate}}">\n            <i c8y-icon="share"></i>\n          </button>\n        </span>\n      </div>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn-primary" data-ng-disabled="addOperationForm.$invalid" ng-click="close()" translate>Add</button>\n    <button class="btn btn-default" ng-click="dismiss()" translate>Cancel</button>\n  </div>\n</form>\n',t.put("core_assetTable/views/addOperation.html",n),t.put("/apps/core/assetTable/views/addOperation.html",n),n='<div class="modal-header">\n  <h3 translate>Select schema properties</h3>\n</div>\n<div class="modal-body">\n  <c8y-property-selector schema="schema" properties="data.properties" single-property-selection="true"></c8y-property-selector>\n</div>\n<div class="modal-footer">\n  <button type="button" data-ng-disabled="!data.properties.length" class="btn btn-primary" ng-click="close()" translate>Select</button>\n  <button type="button" class="btn btn-default" ng-click="dismiss()" translate>Cancel</button>\n</div>\n',t.put("core_assetTable/views/addProperties2.html",n),t.put("/apps/core/assetTable/views/addProperties2.html",n),n='<div ng-controller="AssetsCtrl">\n  <table class="table table-condensed table-striped" data-ng-show="devices.length">\n\n    <thead>\n    <tr>\n      <th data-ng-show="options.data.availability"></th>\n      <th>\n        <p class="table-header" translate>Device</p>\n        <c8y-sort down-sort-action="orderBy(\'name\')" up-sort-action="orderBy(\'-name\')"></c8y-sort>\n      </th>\n      <th data-ng-show="options.data.alarms">\n        <p class="table-header" translate>Alarm status</p>\n        <c8y-sort down-sort-action="orderAlarms()" up-sort-action="orderAlarms(true)"></c8y-sort>\n      </th>\n      <th data-ng-show="options.data.communication">\n        <p class="table-header" translate>Last communication</p>\n        <c8y-sort down-sort-action="orderBy(\'c8y_Availability.lastMessage\')" up-sort-action="orderBy(\'-c8y_Availability.lastMessage\')"></c8y-sort>\n      </th>\n      <th data-ng-show="options.data.location">\n        <p class="table-header" translate>Location</p>\n        <c8y-sort down-sort-action="orderBy(\'c8y_Position\')" up-sort-action="orderBy(\'-c8y_Position\')"></c8y-sort>\n      </th>\n      <th data-ng-show="options.data.lastValidMessage">\n        <p class="table-header" translate>Last valid message</p>\n        <c8y-sort down-sort-action="orderLastValidMessage()" up-sort-action="orderLastValidMessage(true)"></c8y-sort>\n      </th>\n      <th data-ng-show="options.data.maintenance"><p class="table-header" translate>Maintenance</p></th>\n      <th data-ng-repeat="column in options.customColumns track by $index">\n        <p class="table-header">{{column.label}}</p>\n      </th>\n      <th data-ng-show="options.deviceShellOperationButtons.length"><p class="table-header" translate>Device shell operations</p></th>\n      <th ng-repeat="column in counterColumns" data-ng-show="options.data[column.name]">\n        <p class="table-header">{{column.label}}</p>\n        <c8y-sort down-sort-action="orderByCount(column.name)" up-sort-action="orderByCount(column.name, true)"></c8y-sort>\n      </th>\n    </tr>\n    </thead>\n\n    <tbody>\n    <tr data-ng-class="{\'realtime-animation-list\' : realtimeAnimation}" ng-repeat="dev in devices">\n      <td ng-show="options.data.availability" class="text-center">\n        <i c8y-icon="{{statusIcon(dev)}}" data-ng-class="statusClass(dev)" uib-tooltip="{{tooltip(dev) | translate}}"></i>\n      </td>\n\n      <td>{{dev.name}}</td>\n\n      <td data-ng-show="options.data.alarms" class="text-left interact">\n        <a ng-href="#{{deviceAlarmLink(dev)}}" class="listLink">\n          <small class="status critical" data-ng-if="dev.c8y_ActiveAlarmsStatus.critical">\n            {{dev.c8y_ActiveAlarmsStatus.critical}} <i c8y-icon="warning"></i>\n          </small>\n          <small class="status major" data-ng-if="dev.c8y_ActiveAlarmsStatus.major">\n            {{dev.c8y_ActiveAlarmsStatus.major}} <i c8y-icon="exclamation-circle"></i>\n          </small>\n          <small class="status minor" data-ng-if="dev.c8y_ActiveAlarmsStatus.minor">\n            {{dev.c8y_ActiveAlarmsStatus.minor}} <i c8y-icon="exclamation-circle"></i>\n          </small>\n          <small class="status warning" data-ng-if="dev.c8y_ActiveAlarmsStatus.warning">\n            {{dev.c8y_ActiveAlarmsStatus.warning}} <i c8y-icon="circle"></i>\n          </small>\n        </a>\n      </td>\n\n      <td data-ng-show="options.data.communication">{{dev.c8y_Availability.lastMessage|absoluteDate}}</td>\n\n      <td data-ng-show="options.data.location">\n        <a data-ng-show="dev.c8y_Position" ng-href="#/device/{{dev.id}}/location" uib-tooltip="{{\'Go to location\' | translate}}"><i c8y-icon="location-arrow"></i></a>\n        <span data-ng-show="!dev.c8y_Position" uib-tooltip="{{\'No location available\' | translate}}">\n          <i c8y-icon="ban" class="text-danger"></i>\n        </span>\n      </td>\n\n      <td data-ng-show="options.data.lastValidMessage">\n        <i uib-tooltip="{{lastValidMessageTooltip(dev) | translate}}" c8y-icon="{{lastValidMessageIcon(dev)}}" data-ng-style="{\'color\': lastValidMessageColor(dev)}"></i>\n      </td>\n\n      <td data-ng-show="options.data.maintenance">\n        <button data-ng-if="dev.c8y_RequiredAvailability" class="btn btn-xs btn-primary text-center" ng-click="switchMaintenance(dev)">\n          {{ 0 >= dev.c8y_RequiredAvailability.responseInterval ? \'Turn off\' : \'Turn on\'}}\n        </button>\n      </td>\n      <td data-ng-repeat="column in options.customColumns track by $index">\n        <i data-ng-style="{color: getIcon(column.iconMap, column.fragment, dev).color || \'red\'}" c8y-icon="{{getIcon(column.iconMap, column.fragment, dev).icon || \'question-circle\'}}"></i>\n      </td>\n      <td data-ng-show="options.deviceShellOperationButtons.length">\n        <div class="btn-group">\n          <button data-ng-if="!button.operation.chosen.deviceType || button.operation.chosen.deviceType && button.operation.chosen.deviceType === dev.type" ng-repeat="button in options.deviceShellOperationButtons" class="btn btn-primary btn-xs text-center" ng-click="executeOperation(button.operation, dev.id)" data-ng-disabled="!button.operation">\n            <span data-ng-hide="button.operation.isPending[dev.id]">{{button.label}}</span>\n            <span data-ng-show="button.operation.isPending[dev.id]"><i c8y-icon="spinner" class="fa-spin"></i><translate>Pending&hellip;</translate></span>\n          </button>\n        </div>\n      </td>\n      <td ng-repeat="column in counterColumns" data-ng-show="options.data[column.name]">\n        {{counters[dev.id][column.name].count}}\n      </td>\n    </tr>\n    </tbody>\n  </table>\n</div>\n',t.put("core_assetTable/views/assets.html",n),t.put("/apps/core/assetTable/views/assets.html",n),n='<div class="asset-table" ng-controller="AssetsCtrl">\n  <div ng-show="devices.length === 0" class="c8y-empty-state text-left">\n    <h1 class="c8y-icon c8y-icon-device c8y-icon-duocolor"></h1>\n    <p><strong translate> No items to display.</strong> <span translate>You must add a target asset or device.</span><br>\n      <span><a href="" ng-click="editChild(child)" translate>Click here to edit</a>.</span></p>\n  </div>\n\n  <table class="table table-condensed table-striped" ng-show="devices.length">\n    <thead class="headers">\n    <tr c8y-sort-group>\n      <th>&nbsp;</th>\n      <th ng-repeat="property in properties track by $index" style="min-width: 50px" class="header-cell">\n        <c8y-sort class="widget-sort" up-action="orderDownBy(property.keyPath)" down-action="orderBy(property.keyPath)"></c8y-sort>\n        <div class="column-name" tooltip-enable="{{!renderedAllDevices()}}" uib-tooltip="{{\'Note: Sorting might not work properly until all rows are loaded\' | translate}}" tooltip-placement="top" tooltip-append-to-body="true">\n          {{property.label}}\n        </div>\n      </th>\n    </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="device in devices" ng-class="{\'realtime-animation-list\' : realtimeAnimation}" c8y-scroll-load c8y-scroll-load-container="div.card-inner-scroll" c8y-scroll-load-on-appear="renderDevice(device)">\n        <td class="text-center">\n          <c8y-device-status-display device="device"></c8y-device-status-display>\n        </td>\n        <td ng-repeat="property in properties track by $index">\n          <div ng-if="renderedDevices[device.id]" c8y-renderer="property.renderType" c8y-renderer-root="device" c8y-renderer-property="property" c8y-renderer-model="buildFields(device, property.keyPath)" c8y-renderer-link="getAssetLinkIfNeeded(device, $index)">\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n',t.put("core_assetTable/views/assets2.html",n),t.put("/apps/core/assetTable/views/assets2.html",n),n='<div data-ng-controller="AssetsConfigCtrl">\n  <div class="form-group" ng-show="assets.length">\n    <label class="checkbox-inline">\n      <input type="checkbox" ng-model="config.options.data.availability" translate> Availability status\n    </label>\n    <label class="checkbox-inline">\n      <input type="checkbox" ng-model="config.options.data.alarms" translate> Alarm status\n    </label>\n    <label class="checkbox-inline">\n      <input type="checkbox" ng-model="config.options.data.communication" translate> Last communication\n    </label>\n    <label class="checkbox-inline">\n      <input type="checkbox" ng-model="config.options.data.location" translate> Location\n    </label>\n    <label class="checkbox-inline">\n      <input type="checkbox" ng-model="config.options.data.lastValidMessage" translate> Last valid message\n    </label>\n    <label class="checkbox-inline">\n      <input type="checkbox" ng-model="config.options.data.maintenance" translate> Maintenance\n    </label>\n  </div>\n  <div class="form-group" ng-show="assets.length">\n    <label ng-repeat="column in counterColumns" class="checkbox-inline">\n      <input type="checkbox" ng-model="config.options.data[column.name]" ng-checked="config.options.data[column.name]">\n      <a ng-click="countConfig(column)">{{column.label}}</a>\n    </label>\n  </div>\n\n  <table class="table table-condensed" ng-show="assets.length">\n\n    <thead>\n    <tr>\n      <th></th>\n      <th translate>Device</th>\n      <th ng-show="config.options.data.availability" translate>Availability status</th>\n      <th ng-show="config.options.data.alarms" translate>Alarm status</th>\n      <th ng-show="config.options.data.communication" translate>Last communication</th>\n      <th ng-show="config.options.data.location" translate>Location</th>\n      <th ng-show="config.options.data.lastValidMessage" translate>Last valid message</th>\n      <th ng-show="config.options.data.maintenance" translate>Maintenance</th>\n      <th ng-repeat="column in counterColumns" ng-show="config.options.data[column.name]">{{column.label}}</th>\n    </tr>\n    </thead>\n\n    <tbody>\n      <tr ng-repeat="asset in assets">\n        <td class="text-center">\n          <input type="checkbox" ng-change="updateOptions()" ng-model="asset.__active">\n        </td>\n        <td>{{asset.name}}</td>\n      </tr>\n    </tbody>\n  </table>\n    <div class="form-group" ng-show="config.options.assets.length">\n      <label translate>Custom columns</label>\n      <button ng-if="config.options.iconsMap.length" class="btn btn-primary pull-right text-center" data-ng-click="addIconMap()">\n          <i c8y-icon="plus"></i><translate> Add / edit icon map</translate>\n      </button>\n      <button class="btn btn-default pull-right text-center" data-ng-click="addCustomColumn()">\n          <i c8y-icon="plus"></i><translate> Add custom column</translate>}}\n      </button>\n      <table class="table table-condensed" ng-show="config.options.customColumns.length">\n        <thead>\n        <tr>\n          <th translate>Fragment</th>\n          <th translate>Icon map</th>\n          <th translate>Label</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr data-ng-repeat="column in config.options.customColumns track by $index">\n          <td>\n            <input class="form-control" type="text" ng-model="column.fragment" required>\n          </td>\n          <td class="text-center">\n            <select ng-if="config.options.iconsMap.length" class="form-control" ng-options="map.id as map.name for map in config.options.iconsMap" ng-model="column.iconMap" required></select>\n            <button ng-if="!config.options.iconsMap.length" class="btn btn-primary pull-left text-center" data-ng-click="addIconMap()">\n                <i c8y-icon="plus"></i><translate> Add icon map</translate>\n            </button>\n          </td>\n          <td>\n            <input class="form-control" type="text" ng-model="column.label" required></td>\n          <td>\n            <button class="btn btn-danger btn-xs showOnHover" title="{{\'Delete item\' | translate}}" data-ng-click="onDelete(config.options.customColumns, $index)">\n              <i c8y-icon="times"></i>\n            </button>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  <div class="form-group" ng-show="config.options.assets.length">\n    <label translate>Device shell operation label button</label>\n    <button class="btn btn-primary pull-right text-center" data-ng-click="addDeviceShellOperationButton()">\n        <i c8y-icon="plus"></i><translate>Add device shell operation button</translate>\n    </button>\n    <table class="table table-condensed" ng-show="config.options.deviceShellOperationButtons.length">\n      <thead>\n      <tr>\n        <th translate>Button label</th>\n        <th translate>Chosen operation</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr data-ng-repeat="button in config.options.deviceShellOperationButtons track by $index">\n        <td>\n          <input type="text" ng-model="button.label" class="form-control" required/>\n        </td>\n        <td>\n          <span ng-if="button.operation.json" class="help-block">{{button.operation.json.description}}</span>\n          <span ng-if="!button.operation.json" class="help-block" translate>No operation chosen</span>\n        </td>\n        <td>\n          <button class="btn btn-default" data-ng-click="addOperation(button)" data-ng-disabled="!assets.length">\n            <i c8y-icon="pencil-square-o"></i>\n          </button>\n        </td>\n        <td>\n          <button class="btn btn-danger btn-xs showOnHover" title="{{\'Delete item\' | translate}}" data-ng-click="onDelete(config.options.deviceShellOperationButtons, $index)">\n            <i c8y-icon="times"></i>\n          </button>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n',t.put("core_assetTable/views/assetsConfig.html",n),t.put("/apps/core/assetTable/views/assetsConfig.html",n),n='<div ng-controller="AssetsTableConfigCtrl">\n  <c8y-property-selector properties="properties" managed-object="config.device" show-render-type="true" include-tree-children="true" default-properties="defaultProperties" device-types="deviceTypes" single-property-selection="true" with-children="true">\n  </c8y-property-selector>\n\n  <p ng-if="forms.componentForm.$invalid" style="margin-top: 20px" class="has-error">\n    <translate ng-if="forms.componentForm.$error.propertySelected" style="display: inline-block" class="help-block">\n      You must select at least one property.\n    </translate>\n  </p>\n</div>\n',t.put("core_assetTable/views/assetsConfig2.html",n),t.put("/apps/core/assetTable/views/assetsConfig2.html",n),n='<form name="addIconMapForm" novalidate>\n  <div class="modal-header">\n    <h3 translate>Icon configuration</h3>\n  </div>\n  <div class="modal-body">\n    <table class="table table-condensed table-vertical-middle">\n      <thead>\n        <tr>\n          <th class="col-lg-3" translate>Property</th>\n          <th class="col-lg-3" translate>Comparison</th>\n          <th class="col-lg-2" translate>Value</th>\n          <th class="col-lg-2" translate>Icon</th>\n          <th class="col-lg-2" translate>Color</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="map in iconMap.map track by $index">\n          <td>\n            <tt ng-bind="iconMap.actionType"></tt>\n          </td>\n          <td>\n            <ui-select ng-model="map.comparison">\n              <ui-select-match placeholder="{{\'Select or search comparison\' | translate}}">\n                {{$select.selected.label | translate}}\n              </ui-select-match>\n              <ui-select-choices repeat="comparison.value as comparison in comparisons | filter:$select.search">\n                <div>\n                  {{comparison.label | translate}}\n                </div>\n              </ui-select-choices>\n            </ui-select>\n          </td>\n          <td>\n            <input class="form-control" type="text" ng-model="map.value" required>\n          </td>\n          <td>\n            <ui-select ng-model="map.icon">\n              <ui-select-match placeholder="{{\'Select or search icon\' | translate}}">\n                <i c8y-icon="{{$select.selected}}"></i>\n                {{$select.selected}}\n              </ui-select-match>\n              <ui-select-choices repeat="icon in icons | filter: $select.search">\n                <div>\n                  <i c8y-icon="{{icon}}"></i> {{icon}}\n                </div>\n              </ui-select-choices>\n            </ui-select>\n          </td>\n          <td>\n            <input c8y-color-picker type="text" class="form-control" name="color" ng-model="map.color"/>\n          </td>\n          <td>\n            <button ng-disabled="iconMap.map.length < 2" class="btn btn-danger btn-xs showOnHover pull-right" title="{{\'Add map\' | translate}}" ng-click="onDelete(iconMap.map, $index)">\n              <i c8y-icon="times"></i>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <a href="" class="btn-add-block" ng-click="addMap(iconMap.map)">\n      <i c8y-icon="plus-circle"></i> <translate>Add condition</translate>\n    </a>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn-primary" ng-disabled="addIconMapForm.$invalid" ng-click="close(iconMap)" translate>Save</button>\n    <button class="btn btn-default" ng-click="dismiss()" translate>Cancel</button>\n  </div>\n</form>\n',
t.put("core_assetTable/views/configIconMap2.html",n),t.put("/apps/core/assetTable/views/configIconMap2.html",n),n='<div class="modal-header" ng-show="title">\n  <h3>{{title | translate}}</h3>\n</div>\n<div class="modal-body">\n  <label>{{\'Type\' | translate}}:</label>\n  <input type="text" ng-model="type">\n</div>\n<div class="modal-footer">\n  <button class="btn btn-primary" ng-click="$close(type)" translate>Submit</button>\n  <button class="btn btn-default" ng-click="dismiss()" translate>Cancel</button>\n</div>\n',t.put("core_assetTable/views/countConfig.html",n),t.put("/apps/core/assetTable/views/countConfig.html",n),n='<i ng-controller="RendererIconCtrl" ng-style="{color: color || \'#CCC\'}" c8y-icon="{{icon || \'question-circle-o\'}}">\n</i>\n',t.put("core_assetTable/views/iconMap2.html",n),t.put("/apps/core/assetTable/views/iconMap2.html",n),n='<small class="status critical" ng-if="value.critical">\n  {{value.critical}} <i c8y-icon="warning"></i>\n</small>\n<small class="status major" ng-if="value.major">\n  {{value.major}} <i c8y-icon="exclamation-circle"></i>\n</small>\n<small class="status minor" ng-if="value.minor">\n  {{value.minor}} <i c8y-icon="exclamation-circle"></i>\n</small>\n<small class="status warning" ng-if="value.warning">\n  {{value.warning}} <i c8y-icon="circle"></i>\n</small>\n',t.put("core_assetTable/views/rendererAlarmStatus.html",n),t.put("/apps/core/assetTable/views/rendererAlarmStatus.html",n),n='<div ng-controller="RendererButtonCtrl">\n  <button class="btn btn-xs btn-primary" ng-click="click()" ng-disabled="disabled || pending" ng-hide="hidden || !isApplicable()">\n    {{getBtnText(config.label) | translate}}\n    <span ng-show="pending">\n      <i c8y-icon="spinner" class="fa-spin"></i>\n    </span>\n  </button>\n  <div ng-show="hidden || !isApplicable()" uib-tooltip="{{\'N/A\' | translate}}">\n    &ndash;\n  </div>\n</div>\n\n',t.put("core_assetTable/views/rendererButton.html",n),t.put("/apps/core/assetTable/views/rendererButton.html",n),n=' <form name="addOperationForm" novalidate>\n  <div class="modal-header">\n    <h3 translate>Button configuration</h3>\n  </div>\n  <div class="modal-body col-lg-12">\n    <div class="form-group">\n      <label class="form-label" translate>Button label</label>\n      <input class="form-control" type="text" ng-model="config.label">\n    </div>\n    <div ng-show="config.actionType === \'createOperation\'">\n      <div class="form-group" style="position:relative; z-index:1000">\n        <div class="input-group">\n          <ui-select ng-model="data.operationSelected">\n            <ui-select-match placeholder="{{\'Select or search operation\' | translate}}">\n              <div>\n                <span class="list-group-item-heading">{{$select.selected.name}} <small ng-show="$select.selected.category" class="text-muted">{{$select.selected.category}}</small></span>\n                <span class="list-group-item-text"><small class="text-muted">{{$select.selected.text | translate}}</small></span>\n              </div>\n            </ui-select-match>\n            <ui-select-choices repeat="operation in commandTemplates | filter: $select.search">\n              <div>\n                <span class="list-group-item-heading">{{operation.name}} <small ng-show="operation.category" class="text-muted">{{operation.category}}</small></span>\n                <span class="list-group-item-text"><small class="text-muted">{{operation.text | translate}}</small></span>\n              </div>\n            </ui-select-choices>\n          </ui-select>\n          <span class="input-group-btn" style="vertical-align: top">\n            <button class="btn btn-primary" type="button" ng-click="chooseOperation(data.operationSelected)" uib-tooltip="{{\'Use this operation\' | translate}}">\n              <i c8y-icon="share"></i>\n            </button>\n          </span>\n        </div>\n      </div>\n      <div class="form-group" ng-class="{\'has-error\': addOperationForm.$dirty && addOperationForm.$invalid}">\n        <label class="form-label"><translate>Operation</translate> <a href="" ng-click="toggleEditor()" uib-tooltip="{{expandTooltip() | translate}}"><i c8y-icon="{{expandIcon()}}"></i></a></label>\n        <textarea ng-show="showEditor" c8y-code-editor="json" class="form-control" name="operation" ng-model="config.args[0]" style="height: 250px" ng-required="config.actionType === \'createOperation\'">\n        </textarea>\n      </div>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn-primary" data-ng-disabled="addOperationForm.$invalid" ng-click="close()" translate>Save</button>\n    <button class="btn btn-default" ng-click="dismiss()" translate>Cancel</button>\n  </div>\n</form>\n',t.put("core_assetTable/views/rendererButtonConfig.html",n),t.put("/apps/core/assetTable/views/rendererButtonConfig.html",n),n='<div>\n  <a href="" class="spin-up"><i c8y-icon="sort-up" data-ng-click="upSortAction()"></i></a>\n  <a href="" class="spin-down"><i c8y-icon="sort-down" data-ng-click="downSortAction()"></i></a>\n</div>\n',t.put("core_assetTable/views/sort.html",n),t.put("/apps/core/assetTable/views/sort.html",n),n='<div style="display:inline-block" ng-style="{visibility: visibility}">\n  <a href="" class="spin-up" ng-style="upCss">\n    <i c8y-icon="sort-up" data-ng-click="sort(\'up\')"></i>\n  </a>\n  <a href="" class="spin-down" ng-style="downCss">\n    <i c8y-icon="sort-down" data-ng-click="sort(\'down\')"></i>\n  </a>\n</div>\n',t.put("core_assetTable/views/sort2.html",n),t.put("/apps/core/assetTable/views/sort2.html",n)}angular.module("c8y.assets").run(["$templateCache",t])}();