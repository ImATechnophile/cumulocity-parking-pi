/* core_deviceRegistrationImpactProvider 9.3.0 2018-03-26T16:25:09+00:00 796b68a031b1+ (release/9.3.0) tip */
!function(){"use strict";function e(e){e.add({name:"impact",featureAppName:"impact",label:"Nokia IMPACT",flow:{single:["impact","finish"],multiple:["providers-list","impact","finish"]},registrationCfg:{showIfPermissions:{anyRole:["ROLE_DEVICE_CONTROL_ADMIN"]}}})}e.$inject=["c8yDeviceProvidersProvider"],angular.module("c8y.deviceRegistrationImpact",["c8y.deviceRegistration"]).config(e)}(),function(){"use strict";function e(e,t,i,r){function a(i){var r=_.assign({},o,{data:i});return e(r).then(t.getResData)}var n=t.url("service/impact"),o={method:"POST",url:n+"/device",silentError:!0},s={type:"object",properties:{protocol:{type:"string",title:r.getString("Protocol"),required:!0},identifier:{type:"string",title:r.getString("Identifier"),required:!0},serialNumber:{type:"string",title:r.getString("Serial number"),required:!0},address:{type:"string",title:r.getString("Address"),required:!0}}},l=t.createEnum([{name:"MODBUS",value:"MBUS",label:i("M-Bus"),schema:_.merge({},s,{type:"object",properties:{additionalParams:{type:"object",properties:{IP:{type:"string",title:r.getString("IP"),required:!0},PORT:{type:"string",title:r.getString("Port"),required:!0}}}}}),form:[{key:["identifier"]},{key:["serialNumber"]},{key:["address"]},{key:["additionalParams","IP"]},{key:["additionalParams","PORT"]}]},{name:"LORA",value:"LoRa",label:i("LoRa"),schema:_.merge({},s,{type:"object",properties:{additionalParams:{type:"object",properties:{AppSKey:{type:"string",title:r.getString("Application session key"),required:!0},NwkSKey:{type:"string",title:r.getString("Network session key"),required:!0},AppKey:{type:"string",title:r.getString("Application key"),required:!0},AppEUI:{type:"string",title:r.getString("Global application ID"),required:!0}}}}}),form:[{key:["identifier"]},{key:["serialNumber"]},{key:["address"]},{key:["additionalParams","AppSKey"]},{key:["additionalParams","NwkSKey"]},{key:["additionalParams","AppKey"]},{key:["additionalParams","AppEUI"]}]},{name:"LWM2M",value:"LWM2M",label:i("LWM2M"),schema:_.merge({},s,{type:"object",properties:{additionalParams:{type:"object",properties:{pskIdentity:{type:"string",title:r.getString("Public key or identity"),required:!0},psk:{type:"string",title:r.getString("Secret key"),required:!0}}}}}),form:[{key:["identifier"]},{key:["serialNumber"]},{key:["address"]},{key:["additionalParams","pskIdentity"]},{key:["additionalParams","psk"]}]},{name:"VIDEO_ANALYTICS",value:"VA",label:i("Video analytics"),schema:_.merge({},s,{type:"object",properties:{additionalParams:{type:"object",properties:{streamURL:{type:"string",title:r.getString("Stream URL"),required:!0},latitude:{type:"string",title:r.getString("Latitude"),required:!0},longitude:{type:"string",title:r.getString("Longitude"),required:!0}}}}}),form:[{key:["identifier"]},{key:["serialNumber"]},{key:["address"]},{key:["additionalParams","streamURL"]},{key:["additionalParams","latitude"]},{key:["additionalParams","longitude"]}]},{name:"XIRGO_OBD",value:"XIRGO",label:i("Xirgo OBD"),schema:_.merge({},s,{type:"object",properties:{additionalParams:{type:"object",properties:{carrierName:{type:"string",title:r.getString("Network provider name"),required:!0}}}}}),form:[{key:["identifier"]},{key:["serialNumber"]},{key:["address"]},{key:["additionalParams","carrierName"]}]},{name:"NB_IOT_SGI",value:"NBIOT-SGI",label:i("NB IoT-SGI"),schema:_.merge({},s,{type:"object",properties:{additionalParams:{type:"object",properties:{IP:{type:"string",title:r.getString("IP"),required:!0},PORT:{type:"string",title:r.getString("Port"),required:!0},IMSI:{type:"string",title:r.getString("IMSI"),required:!0},SGIID:{type:"string",title:r.getString("Unique SGI interface identifier"),required:!0}}}}}),form:[{key:["identifier"]},{key:["serialNumber"]},{key:["address"]},{key:["additionalParams","carrierName"]}]}]);return{PROTOCOLS:l,register:a}}e.$inject=["$http","c8yBase","gettext","gettextCatalog"],angular.module("c8y.deviceRegistrationImpact").factory("deviceRegistrationImpactProviderService",e)}(),function(){"use strict";function e(e,t,i){function r(i){n.device.protocol=i.value,e(t.doResize,500)}function a(){t.disableInteractionWhenRequestInProgress(n,!0),t.setFormData(n.wizardCtrl.data,{device:n.device}),i.register(n.device).then(function(e){t.setSuccessData(n.wizardCtrl.data,e)}).catch(function(e){t.setErrorData(n.wizardCtrl.data,e)}).finally(function(){t.disableInteractionWhenRequestInProgress(n,!1),n.wizardCtrl.goTo("finish"),e(t.doResize,500)})}var n=this;_.assign(n,{device:{},doResize:t.doResize,protocols:i.PROTOCOLS,onProtocolChanged:r,next:a})}e.$inject=["$timeout","deviceRegistrationWizardUtils","deviceRegistrationImpactProviderService"],angular.module("c8y.deviceRegistrationImpact").component("deviceRegistrationImpact",{bindings:{backStep:"@?"},require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"core_deviceRegistrationImpactProvider/deviceRegistrationImpact.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(e){var t;t='<div>\n  <div class="modal-inner-scroll" style="min-height: 215px">\n    <div ng-form="vm.deviceForm" class="modal-body" novalidate>\n      <div ng-init="vm.doResize()"></div>\n      <div class="form-group">\n        <label translate>Protocol</label>\n        <ui-select name="protocol" class="form-control text-left" ng-model="vm.selectedProtocol" ng-change="vm.onProtocolChanged(vm.selectedProtocol)" required>\n          <ui-select-match placeholder="{{\'Select protocol\' | translate}}">{{vm.selectedProtocol.label | translate}}\n          </ui-select-match>\n          <ui-select-choices repeat="protocol in vm.protocols.values() | filter:$select.search | orderBy:\'label\'">\n          <span ng-bind-html="protocol.label | translate | highlight:$select.search" title="{{protocol.label | translate}}">\n          </span>\n          </ui-select-choices>\n        </ui-select>\n        <c8y-error-feedback field="vm.deviceForm.protocol">\n        </c8y-error-feedback>\n      </div>\n\n      <c8y-schema-form schema="vm.selectedProtocol.schema" form="vm.selectedProtocol.form" model="vm.device" options="vm.selectedProtocol.options">\n      </c8y-schema-form>\n    </div>\n  </div>\n\n  <div class="c8y-wizard-footer modal-footer">\n    <button class="btn btn-default" ng-disabled="vm.inProgress" ng-click="vm.wizardCtrl.goTo(vm.backStep)" translate>\n      Back\n    </button>\n    <button class="btn btn-primary" ng-disabled="vm.deviceForm.$invalid || vm.inProgress" ng-click="vm.next()">\n      <span ng-show="!vm.inProgress" translate>Next</span>\n      <span ng-show="vm.inProgress">\n        <i c8y-icon="circle-o-notch" class="fa-spin"></i>\n      </span>\n    </button>\n  </div>\n</div>\n',e.put("core_deviceRegistrationImpactProvider/deviceRegistrationImpact.html",t),e.put("/apps/core/deviceRegistrationImpactProvider/deviceRegistrationImpact.html",t)}angular.module("c8y.deviceRegistrationImpact").run(["$templateCache",e])}();