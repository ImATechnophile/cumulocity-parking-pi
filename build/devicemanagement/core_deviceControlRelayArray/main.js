/* core_deviceControlRelayArray 9.3.0 2018-03-26T16:25:03+00:00 796b68a031b1+ (release/9.3.0) tip */
!function(){"use strict";function e(e,r){e.add({name:"deviceControlRelayArrayWidget",nameDisplay:r("Relay array control"),description:r("Remote control a device's relay array."),templateUrl:"core_deviceControlRelayArray/widget.html",options:{groupsSelectable:!1}})}angular.module("c8y.deviceControl.relayArray",[]).config(["c8yComponentsProvider","gettext",e])}(),function(){"use strict";function e(e,r){function t(){var t=r.deviceId;return e.child.config&&e.child.config.device&&e.child.config.device.id&&(t=e.child.config.device.id),t}this.getDeviceId=t}angular.module("c8y.deviceControl.relayArray").controller("deviceControlRelayArrayWidgetCtrl",["$scope","$routeParams",e])}(),function(){"use strict";function e(){return{restrict:"E",scope:{device:"&",suppressAlerts:"&",onSuccess:"&",onError:"&"},controller:"c8yRelayArrayControlCtrl",controllerAs:"ctrl",templateUrl:"core_deviceControlRelayArray/relayArrayControl/relayArrayControl.html"}}angular.module("c8y.deviceControl.relayArray").directive("c8yRelayArrayControl",e)}(),function(){"use strict";function e(e,r,t,n,o,a,c,l,i){function s(r){var t=r&&(r.id||r);t&&n.detailRealtime(t,e).then(function(e){S.deviceRealtime=m=e})}function y(){return o.supportsOperation(m,"c8y_RelayArray")}function d(e){return"CLOSED"===e}function u(e){var r={deviceId:m.id,c8y_RelayArray:_.cloneDeep(m.c8y_RelayArray)};return r.c8y_RelayArray[e]=d(r.c8y_RelayArray[e])?"OPEN":"CLOSED",r.description=i.getString(l(d(r.c8y_RelayArray[e])?"Close relay {{relayNo}}":"Open relay {{relayNo}}"),{relayNo:e+1}),a.createWithNotifications(r).then(function(e){e.created.then(_.partial(p,r)),e.completed.then(g)})}function p(e){C(i.getString('Sent operation: "{{description | translate}}"!',{description:i.getString(e.description)}))}function g(e){e.status===a.status.SUCCESSFUL?v(e):e.status===a.status.FAILED&&f(e)}function v(r){C(i.getString('Successfully executed operation: "{{description | translate}}"!',{description:i.getString(r.description)})),e.onSuccess&&e.onSuccess({operationResult:r})}function f(r){A(r.failureReason?i.getString('Failed to execute operation beacuse of reason: "{{failureReason}}"!',{failureReason:i.getString(r.failureReason)}):l("Failed to execute operation!")),e.onFailure&&e.onFailure({operationResult:r})}function C(e){R(c.success,e)}function A(e){R(c.danger,e)}function R(e,r){h()||e(r)}function h(){return e.suppressAlerts&&e.suppressAlerts()}var m,S=this;e.$watch("device()",s),this.isSupported=y,this.isClosed=d,this.toggle=u}angular.module("c8y.deviceControl.relayArray").controller("c8yRelayArrayControlCtrl",["$scope","$routeParams","c8yBase","c8yInventory","c8yDevices","c8yDeviceControl","c8yAlert","gettext","gettextCatalog",e])}(),function(){"use strict";function e(e){var r;r='<div>\n  <div ng-hide="ctrl.isSupported()" class="alert alert-warning" translate>\n    Operation not supported by this device\n  </div>\n  <div ng-show="ctrl.isSupported()">\n    <button type="button" ng-click="ctrl.toggle($index)" ng-repeat="rl in ctrl.deviceRealtime.c8y_RelayArray track by $index" class="btn c8y-btn-checkbox" ng-class="{\'active\': ctrl.isClosed(rl)}">\n      <i class="fa" ng-class="{\'fa-check text-success\':ctrl.isClosed(rl), \'fa-ban text-danger\': !ctrl.isClosed(rl)}"></i>\n      {{$index + 1}}\n    </button>\n  </div>\n</div>',e.put("core_deviceControlRelayArray/relayArrayControl/relayArrayControl.html",r),e.put("/apps/core/deviceControlRelayArray/relayArrayControl/relayArrayControl.html",r),r='<div ng-controller="deviceControlRelayArrayWidgetCtrl as ctrl" style="padding: 10px">\n  <c8y-relay-array-control device="ctrl.getDeviceId()"></c8y-relay-array-control>\n</div>\n',e.put("core_deviceControlRelayArray/widget.html",r),e.put("/apps/core/deviceControlRelayArray/widget.html",r)}angular.module("c8y.deviceControl.relayArray").run(["$templateCache",e])}();