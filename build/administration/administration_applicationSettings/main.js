/* administration_applicationSettings 9.3.0 2018-03-26T16:24:16+00:00 796b68a031b1+ (release/9.3.0) tip */
angular.module("c8y.parts.applicationSettings",[]).config(["c8yNavigatorProvider","c8yViewsProvider","gettext",function(t,a,n){"use strict";t.addNavigation({parent:n("Settings"),name:n("Application"),path:"applicationsettings",icon:"cog",priority:2e3}),a.when("/applicationsettings",{templateUrl:"administration_applicationSettings/views/index.html"})}]),function(){"use strict";function t(t,a,n,i,e,l,o,c){function s(){e.listByVisibleLinks().then(function(a){t.applications=p(a),r()})}function p(t){return _.filter(t,{type:"HOSTED"})}function r(){return n.detail({category:"application",key:"default.application"}).then(function(a){t.applicationSettings.defaultApplication=_.find(t.applications,{id:a.data.value})})}function d(){return n.updateOption({category:"application",key:"default.application",value:t.applicationSettings.defaultApplication.id}).then(function(){l.success(c.getString('Application "{{appName | humanizeAppName}}" is now the default application for the tenant!',{appName:t.applicationSettings.defaultApplication.contextPath}))})}function u(a){var n=a.key.replace(/\./,"_");t[n]=a}function m(){n.detail({category:y,key:b}).then(function(t){return t.data}).then(u)}function f(t){return""===t.value?h(t):g(t)}function h(){return n.deleteOption({category:y,key:b}).then(function(){l.success(o("Access control has been disabled"))})}function g(t){return n.updateOption({category:y,key:b,value:t.value}).then(function(){return m()}).then(function(){l.success(c.getString("Access allowed from domain(s): {{value}}!",{value:t.value}))})}function v(){i.changeTitle({title:o("Application")})}var y="access.control",b="allow.origin",w=o('The \'Allowed domain\' setting will enable your JavaScript web applications to directly communicate with REST APIs.\nSet it to "*" to allow communication from any host.\nSet it to "http://my.host.com, http://myother.host.com" to allow applications from http://my.host.com and from http://myother.host.com to communicate with the platform.\nLeave it empty to allow access only from your tenant\'s domain.\nSee http://enable-cors.org for more information.');_.assign(t,{applicationSettings:{},updateDefaultApp:d,helpText:w,saveAccessControl:f,filterHostedApps:p}),s(),m(),v()}t.$inject=["$scope","$q","c8ySettings","c8yTitle","c8yApplication","c8yAlert","gettext","gettextCatalog"],angular.module("c8y.parts.applicationSettings").controller("applicationSettingsCtrl",t)}(),function(){"use strict";function t(t){var a;a='<div class="row" data-ng-controller="applicationSettingsCtrl">\n  <div class="col-xs-12 col-sm-12 col-md-6">\n    <form name="defaultAppForm" data-ng-submit="updateDefaultApp()" class="card">\n      <div class="card-header">\n        <h4 class="card-title" translate>Default application</h4>\n      </div>\n      <hr>\n      <div class="card-block">\n        <p translate>The default application applies to all users of the tenant. Please select the default application from the list below and ensure all users have access to this application.</p>\n      </div>\n      <hr>\n      <ul class="list-group">\n        <li ng-repeat="application in applications track by application.id" class="list-group-item item-list-row">\n          <span style="width:40px" class="text-center">\n            <label class="c8y-radio">\n              <input type="radio" id="{{\'apps\' + $index}}" name="defaultApp" ng-model="applicationSettings.defaultApplication" ng-value="application" ng-class="{\'active\': applicationSettings.defaultApplication === application}">\n              <span></span>\n            </label>\n          </span>\n          <div class="text-center" style="width:55px">\n            <c8y-app-icon app="::application"></c8y-app-icon>\n          </div>\n          <label for="{{\'apps\' + $index}}">\n            {{::application | humanizeAppName}} <br>\n            <small class="text-muted">{{::application.contextPath}}</small>\n          </label>\n        </li>\n      </ul>\n      <div class="card-footer">\n        <button type="submit" class="btn btn-primary" ng-disabled="defaultAppForm.$invalid || defaultAppForm.$pristine" translate>\n          Save default application\n        </button>\n      </div>\n    </form>\n  </div>\n\n  <div class="col-xs-12 col-sm-12 col-md-6">\n    <form name="accessForm" data-ng-submit="saveAccessControl(allow_origin)" novalidate class="card">\n      <div class="card-header">\n        <h4 class="card-title" translate>Access control</h4>\n      </div>\n      <hr>\n      <div class="card-block">\n        <p class="bottom-m" style="white-space:pre-wrap">{{helpText | translate}}</p>\n        <div class="form-group">\n          <label translate>Allowed domain</label>\n          <input type="text" class="form-control" data-ng-model="allow_origin.value">\n          <p class="help-block text-info" translate>Beware not to lock yourself out of the platform.</p>\n        </div>\n      </div>\n      <div class="card-footer">\n        <button type="submit" class="btn btn-primary" ng-disabled="accessForm.$invalid || accessForm.$pristine" translate>Save access control</button>\n      </div>\n    </form>\n  </div>\n</div>\n',t.put("administration_applicationSettings/views/index.html",a),t.put("/apps/administration/applicationSettings/views/index.html",a)}angular.module("c8y.parts.applicationSettings").run(["$templateCache",t])}();